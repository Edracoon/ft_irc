(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/amk":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("qonV"),a=n("EM62"),r=["container"],o=function(){function e(e){this.pluginReg=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.manifest._url},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this.pluginReg.burrowMainIframe(this.manifest._url);this.container.nativeElement.appendChild(e)},e.prototype.ngOnDestroy=function(){var e=this.container.nativeElement.firstChild;this.pluginReg.returnMainIframe(this.manifest._url,e)},e.\u0275fac=function(t){return new(t||e)(a.fc(i.a))},e.\u0275cmp=a.Zb({type:e,selectors:[["plugin-panel"]],viewQuery:function(e,t){var n;(1&e&&a.Tc(r,!0),2&e)&&(a.Jc(n=a.tc())&&(t.container=n.first))},inputs:{manifest:"manifest"},decls:2,vars:0,consts:[[1,"plugin-iframe-container"],["container",""]],template:function(e,t){1&e&&a.gc(0,"div",0,1)},styles:[".plugin-iframe-container[_ngcontent-%COMP%], .plugin-iframe-container[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e}()},"62De":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("EM62"),a=n("C05f"),r=n("5xGT"),o=n("2kYt");function c(e,t){1&e&&i.gc(0,"div",11)}function s(e,t){if(1&e){var n=i.mc();i.lc(0,"div",12),i.lc(1,"div",13),i.ad(2),i.kc(),i.lc(3,"button",14),i.sc("click",(function(){return i.Mc(n),i.wc().buttonClicked("use")})),i.ad(4," Use "),i.kc(),i.kc()}if(2&e){var a=i.wc();i.Sb(2),i.cd(" ",a.name," "),i.Sb(1),i.Tb("data-testid",a.name+"-use-button")}}var l=function(e){return{"background-image":e}},u=function(){function e(){this.isTemplate=!0,this.onButtonClick=new i.t,this.loading=new a.a(!1)}return e.prototype.tileClicked=function(){this.isTemplate||this.loading.next(!0)},e.prototype.buttonClicked=function(e){this.onButtonClick.next(e),this.loading.next(!1);var t=this.trackingInfo.type?this.trackingInfo.type.split("#")[1]:this.trackingInfo.type;r.Ib.track(this.trackingInfo.location+".item.click",{value1Type:"templateId",value1:this.trackingInfo.id,value2Type:"name",value2:this.trackingInfo.name,value3Type:"type",value3:t})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["template-thumbnail"]],inputs:{name:"name",isTemplate:"isTemplate",thumbImg:"thumbImg",trackingInfo:"trackingInfo",isUserPaused:"isUserPaused"},outputs:{onButtonClick:"onButtonClick"},decls:13,vars:15,consts:[[1,"template-thumbnail-container",3,"click"],["class","overlay",4,"ngIf"],[1,"template-thumbnail-inner"],[1,"template-thumbnail-image",3,"ngStyle"],[1,"template-thumbnail-name","fx-ellipsis"],["class","template-thumbnail-overlay fx-center-all",4,"ngIf"],[1,"spinner-container","fx-cover","fx-center-all"],["id","spinner",1,"spinner"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[1,"overlay"],[1,"template-thumbnail-overlay","fx-center-all"],[1,"template-thumbnail-overlay-heading"],[1,"nu-btn-med","secondary",3,"click"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.sc("click",(function(){return t.tileClicked()})),i.xc(1,"async"),i.Yc(2,c,1,0,"div",1),i.lc(3,"div",2),i.gc(4,"div",3),i.lc(5,"div",4),i.ad(6),i.kc(),i.Yc(7,s,5,2,"div",5),i.kc(),i.lc(8,"div",6),i.lc(9,"div",7),i.gc(10,"div",8),i.gc(11,"div",9),i.gc(12,"div",10),i.kc(),i.kc(),i.kc()),2&e&&(i.Xb("show-loading",i.yc(1,11,t.loading))("template",t.isTemplate)("fx-pointer-events-none",t.isUserPaused),i.Tb("data-testid",t.name),i.Sb(2),i.Bc("ngIf",t.isUserPaused),i.Sb(2),i.Bc("ngStyle",i.Fc(13,l,"url("+t.thumbImg+")")),i.Sb(2),i.cd(" ",t.name," "),i.Sb(1),i.Bc("ngIf",t.isTemplate))},directives:[o.t,o.w],pipes:[o.b],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.template-thumbnail-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;width:195px;height:175px;display:inline-block;position:relative;cursor:pointer;border:1px solid #d3d3e7;box-shadow:0 2px 2px #c3c3de}.template-thumbnail-container[_ngcontent-%COMP%]:hover{color:#ffc648}.template-thumbnail-container[_ngcontent-%COMP%]:hover   .template-thumbnail-overlay[_ngcontent-%COMP%]{display:flex}.template-thumbnail-container.template[_ngcontent-%COMP%]:hover   .template-thumbnail-image[_ngcontent-%COMP%], .template-thumbnail-container.template[_ngcontent-%COMP%]:hover   .template-thumbnail-name[_ngcontent-%COMP%]{filter:blur(5px)}.template-thumbnail-container[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{top:0;display:none;background-color:rgba(0,0,0,.5)}.template-thumbnail-container.show-loading[_ngcontent-%COMP%]{pointer-events:none}.template-thumbnail-container.show-loading[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{display:flex}.template-thumbnail-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none}.template-thumbnail-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.template-thumbnail-image[_ngcontent-%COMP%]{flex:1;background-size:contain;background-repeat:no-repeat;background-position:50%;margin:10px}.template-thumbnail-name[_ngcontent-%COMP%]{height:30px;text-align:center;padding-left:10px;padding-right:10px}.template-thumbnail-overlay[_ngcontent-%COMP%]{display:none;flex-direction:column;background-color:rgba(0,0,0,.5);position:absolute;width:100%;height:100%;padding:10px}.template-thumbnail-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:70px}.template-thumbnail-overlay-heading[_ngcontent-%COMP%]{height:44px;color:#fff;text-align:center;line-height:20px;overflow:hidden}"],changeDetection:0}),e}()},"8EYK":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=[{id:"g-popular",name:"TEMPLATE_PANEL.CAT_POPULAR",categories:[{id:"g-popular-default"}]},{id:"g-brainstorm",name:"TEMPLATE_PANEL.CAT_BRAINSTORM",categories:[{id:"g-brainstorm-default"}]},{id:"g-strategy",name:"TEMPLATE_PANEL.CAT_STRATEGY",categories:[{id:"g-strategy-default"}]},{id:"g-projects",name:"TEMPLATE_PANEL.CAT_PROJECTS",categories:[{id:"g-projects-default"}]},{id:"g-software",name:"TEMPLATE_PANEL.CAT_SOFTWARE",categories:[{id:"g-software-default"}]},{id:"g-it",name:"TEMPLATE_PANEL.CAT_NETWORK",categories:[{id:"g-it-network-default"}]},{id:"g-process",name:"TEMPLATE_PANEL.CAT_PROCESS",categories:[{id:"g-process-default"}]},{id:"g-meetings",name:"TEMPLATE_PANEL.CAT_MEETINGS",categories:[{id:"g-meetings-default"}]},{id:"g-document",name:"TEMPLATE_PANEL.CAT_DOCUMENT",categories:[{id:"g-document-default"}]},{id:"g-sales",name:"TEMPLATE_PANEL.CAT_SALES",categories:[{id:"g-sales-default"}]},{id:"g-edu",name:"TEMPLATE_PANEL.CAT_EDU",categories:[{id:"g-edu-default"}]}],a=n("yQxh"),r=[{id:"g4nxEBiLhaI",name:"Flowchart",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/g4nxEBiLhaI",type:"diagram/def/flowchart.js#Flowchart"},{id:"ddPVp5iSnAW",name:"Mind Map",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/ddPVp5iSnAW",type:"diagram/def/mindmap.js#MindMap"},{id:"bWR4c0jH0fI",name:"Org Chart",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/bWR4c0jH0fI",type:"diagram/def/org-chart.js#OrgChart"},{id:"vAnBkdf0iQR",name:"Concept Map",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vAnBkdf0iQR",type:"diagram/def/concept-map.js#ConceptMap"},{id:"vyWUec9kb7U",name:"Infographic",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vyWUec9kb7U",type:"diagram/def/infographics.js#Infographics"},{id:"QntZ3BLMuEE",name:"UML Class",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/QntZ3BLMuEE",type:"diagram/def/uml-class.js#UMLClass"},{id:"tN3HFAAsYmP",name:"UML Use Case",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/tN3HFAAsYmP",type:"diagram/def/usecase.js#UseCase"},{id:"ijS6B7RhEZr",name:"Database",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/ijS6B7RhEZr",type:"diagram/def/database.js#Database"}],o=n("nsO7"),c=n("EM62"),s=function(){function e(){this.groups=i,this.templates=a.a,this._featuredTemplates=r}return Object.defineProperty(e.prototype,"allTemplateGroups",{get:function(){return this.groups},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"featuredTemplates",{get:function(){return this._featuredTemplates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allTemplates",{get:function(){return this.templates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allCategoryLessTemplates",{get:function(){return this.allTemplates.filter((function(e){return e.categories.length<=0}))},enumerable:!1,configurable:!0}),e.prototype.getTemplatesByCategory=function(e){return this.allTemplates.filter((function(t){return t.categories.includes(e)}))},e.prototype.getTemplatesByGroupCategory=function(e){var t=this,n=this.groups.find((function(t){return t.id===e}));return n&&n.categories?Object(o.flatten)(n.categories.map((function(e){return t.getTemplatesByCategory(e.id)}))):this.getTemplatesByCategory(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},"8Tlt":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("EM62"),a=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["shape-thumbnail-loader"]],decls:5,vars:0,consts:[[1,"thumbnail-loader-container","white"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 50 40"],["points","12.06 17.32 9.96 17.32 9.96 4.98 29.78 4.98 29.78 17.2 27.68 17.2 27.68 7.08 12.06 7.08 12.06 17.32",2,"fill","#f1f0f0"],["points","44.13 28.92 24.64 28.92 24.64 26.82 40.5 26.82 32.45 12.89 25.72 24.55 23.91 23.5 32.45 8.7 44.13 28.92",2,"fill","#f1f0f0"],["d","M15.78,35a9.91,9.91,0,1,1,9.91-9.91A9.92,9.92,0,0,1,15.78,35Zm0-17.72a7.82,7.82,0,1,0,7.82,7.81A7.81,7.81,0,0,0,15.78,17.3Z",2,"fill","#f1f0f0"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.vc(),i.lc(1,"svg",1),i.gc(2,"polygon",2),i.gc(3,"polygon",3),i.gc(4,"path",4),i.kc(),i.kc())},styles:[".thumbnail-loader-container[_ngcontent-%COMP%]{width:100%;height:40px;text-align:center}"],changeDetection:0}),e}()},"8uPo":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("h1tj"),a=n("19Zn"),r=n("C05f"),o=n("6EBr"),c=n("nsO7"),s=n("5xGT"),l=n("TLy2"),u=n("BwBJ"),d=n("8j5Y"),p=n("X0jn"),h=n("D57K"),f=function(e){function t(t){var n=e.call(this,t)||this;return n._zoom=1,n}return Object(h.e)(t,e),t.prototype.destroy=function(){this.canvas=null,this._eventListeners=null},t.prototype.setupStage=function(){this.snapToPixelEnabled=!0,this.updateCanvasSize()},t.prototype.updateCanvasSize=function(){var e=this.canvas,t=e.width!==e.offsetWidth*window.devicePixelRatio,n=e.height!==e.offsetHeight*window.devicePixelRatio;(t||n)&&(t&&(e.width=e.offsetWidth*window.devicePixelRatio),n&&(e.height=e.offsetHeight*window.devicePixelRatio),this.setCanvasScale(),this.update())},t.prototype.setCanvasScale=function(){this.scaleX=window.devicePixelRatio*this._zoom,this.scaleY=window.devicePixelRatio*this._zoom},t}(i.Stage),g=n("EM62"),m=n("8Tlt"),b=n("2kYt"),v=function(){function e(e){this.rendered=e,this.isPreview=!1,this.canvasIdPrefix="thumb",this.loading=new r.a(!0),this.focusSubject=new r.a(!1),this.subs=[]}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return this.canvasIdPrefix+"-"+this.defId+"-"+this.version},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.canvas=new f(this.canvasId),this.canvas.setupStage(),this.canvas.preventSelection=!1,this.canvas.enableDOMEvents(!1),this.thumbnail=new i.Shape,this.canvas.addChild(this.thumbnail),this.focusSubject.next(this.focus),this.subs.push(this.focusSubject.pipe(Object(l.a)((function(t){return e.draw(t).pipe(Object(u.a)(0),Object(d.a)({complete:function(){e.loading.next(!1)}}))}))).subscribe())},e.prototype.ngOnChanges=function(e){(e.focus&&!e.focus.firstChange||e.defId&&!e.defId.firstChange)&&this.focusSubject.next(this.focus)},e.prototype.ngOnDestroy=function(){for(this.canvas&&this.canvas.destroy();this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.draw=function(e){var t=this;void 0===e&&(e=!1);var n=this.thumbnail.graphics,i=new s.sb(5,5,70,70),a=this.getStyles();return e&&(a.lineColor=o.a.primarySelectionColor),this.isPreview||(a.lineThickness=1.4*a.lineThickness),n.clear(),n.beginStroke(a.lineColor),n.setStrokeStyle(a.lineThickness),n.beginFill(a.fillColor),this.rendered.renderThumbnail(n,this.defId,this.version,i).pipe(Object(d.a)({complete:function(){n.endFill(),n.endStroke(),t.canvas.update()}}))},e.prototype.getStyles=function(){return this.style||(this.style={}),Object(c.merge)({fillStyle:p.e.Solid,fillColor:o.a.defaultShapeFillColor,fillAlpha:1,lineAlpha:1,lineColor:o.a.defaultShapeThumbnailLineColor,lineThickness:o.a.defaultShapeLineThickness},this.style)},e.\u0275fac=function(t){return new(t||e)(g.fc(a.y))},e.\u0275cmp=g.Zb({type:e,selectors:[["thumbnail-canvas"]],inputs:{defId:"defId",version:"version",style:"style",focus:"focus",isPreview:"isPreview",canvasIdPrefix:"canvasIdPrefix"},features:[g.Qb],decls:6,vars:7,consts:[["mouseenter","",1,"thumb-img-container","fx-center-all"],[1,"thumb-img-loader-container","white"],[1,"thumb-img-canvas-container"],[3,"id"]],template:function(e,t){1&e&&(g.lc(0,"div",0),g.xc(1,"async"),g.lc(2,"div",1),g.gc(3,"shape-thumbnail-loader"),g.kc(),g.lc(4,"div",2),g.gc(5,"canvas",3),g.kc(),g.kc()),2&e&&(g.Xb("loading",g.yc(1,5,t.loading)),g.Sb(4),g.Xb("preview",t.isPreview),g.Sb(1),g.Cc("id",t.canvasId))},directives:[m.a],pipes:[b.b],styles:[".thumb-img-container[_ngcontent-%COMP%]{position:relative}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-loader-container[_ngcontent-%COMP%]{display:block}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%], .thumb-img-container[_ngcontent-%COMP%]   .thumb-img-canvas-container.preview[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:80px;height:80px}.thumb-img-container[_ngcontent-%COMP%]   .thumb-img-canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:35px;height:35px}.thumb-img-canvas-container[_ngcontent-%COMP%], .thumb-img-loader-container[_ngcontent-%COMP%]{width:100%;height:35px}.thumb-img-canvas-container.preview[_ngcontent-%COMP%]{height:auto}.thumb-img-loader-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:none}"],changeDetection:0}),e}()},IOVY:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("D57K"),a=n("PGgW"),r=n("s9Xn"),o=n("nsO7"),c=n("sKtG"),s=n("IGWl"),l=n("aSzn"),u=n("X0jn"),d=n("TLy2"),p=n("YtkY"),h=n("jIqt"),f=n("BwBJ"),g=n("Ohay"),m=n("xVbo"),b=n("0B/R"),v=n("ROBh"),O=n("GoAz"),y=n("flPR"),C=n("EM62"),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toolbarGap=10,t}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.toolbarManager.get("shape-text-toolbar")},enumerable:!1,configurable:!0}),t.prototype.listenToChanges=function(){var e=this;return this.duringTextEdit({action:"quickhide"},{action:"quickshow"}).pipe(Object(d.a)((function(t){return e.isShowAction(t.action)?e.state.changes("TextEditorState").pipe(Object(p.a)((function(e){return e.selection&&e.selection.width?{action:"quickshow"}:{action:"quickhide"}}))):Object(v.a)(t)})),Object(d.a)((function(t){return e.isShowAction(t.action)?e.duringPan({action:"quickshow"},{action:"quickhide"}).pipe(Object(h.a)(t)):Object(v.a)(t)})),Object(f.a)(1),Object(g.a)())},t.prototype.positionToolbar=function(){var e=this.state.get("TextEditorState");if(e.selection&&e.selection.width){var t=this.state.get("DiagramZoomLevel"),n=this.state.get("DiagramPan"),i=t/e.zoom,a=n.x-e.pan.x*i,r=n.y-e.pan.y*i,o=e.editorBounds.x*i+a+(e.selection.x+e.selection.width/2)*t,c=e.editorBounds.y*i+r+(e.selection.y-this.toolbarGap)*i;this.toolbar.position({x:o,y:c},"bottomcenter")}return Object(v.a)({})},t.prototype.getToolbarItems=function(){var e=this,t=this.state.get("Selected");return t.length>0?this.getTextToolbarItems(t[0]).pipe(Object(d.a)((function(t){return e.state.changes("TextEditorState").pipe(Object(p.a)((function(e){return e.styles})),Object(p.a)((function(n){return t.map((function(i){return i.data&&(i.data.value=void 0===n[i.data.style]?null:n[i.data.style],e.handleListData(i,n[i.data.style]),e.handleHyperlinkButtons(t,n)),Object(o.cloneDeep)(i)}))})))}))):Object(v.a)([])},t.prototype.handleHyperlinkButtons=function(e,t){var n;return(n="string"==typeof t.link||Object(o.isEqual)({},t.link)?e.findIndex((function(e){return"openHyperlinkEditor"===e.featureId})):e.findIndex((function(e){return"unlinkHyperlink"===e.featureId})))>-1&&e.splice(n,1),e},t.prototype.getTextToolbarItems=function(e){var t=this;return this.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(m.a)((function(e){return!!e})),Object(d.a)((function(e){var n=e.getContextualToolbarItemsForTextEdit();return Object(O.a)(n).pipe(Object(d.a)((function(e){return t.isFeatureEnabled(e.featureId).pipe(Object(p.a)((function(t){return{enabled:t,item:e}})),Object(m.a)((function(e){return e.enabled})),Object(p.a)((function(e){return e.item})))})),Object(b.a)())})))},t.prototype.updateShowMethod=function(e){return e},t.prototype.getUIControlType=function(e){if(!e||e===u.d.BINARY)return s.a;if(e===u.d.OPTION_LIST_COMBO)return c.a;if(e===u.d.OPTION_LIST)return a.a;if(e===u.d.OPTION_IMAGES)return r.a;throw new Error("A contextual toolbar UI control is not available for "+e)},t.prototype.handleListData=function(e,t){if(e.data.data){var n=e.data.data;if(n.forEach((function(e){return e.selected=!1})),!(void 0===t||"object"==typeof t&&Object(o.isEmpty)(t))){var i=n.find((function(e){return""+e.value==""+t}));if(i)i.selected=!0;else{var a=n.find((function(e){return e.custom}));a?(a.id=t,a.label=t,a.buttonLabel=t,a.value=t,a.selected=!0):n.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}}}},t.\u0275fac=function(e){return S(e||t)},t.\u0275prov=C.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(y.a)()],t)}(l.a),S=C.nc(x);Object.defineProperty(x,"name",{value:"ShapeTextToolbarHandler"})},JupZ:function(e,t,n){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=i(n(2));e.exports=a.default},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(9)),r=i(n(3)),o=n(4),c=function(){if("undefined"!=typeof window){var e=100,t=["scroll","resize","load"],n={history:[]},i={offset:{},threshold:0,test:o.inViewport},c=(0,a.default)((function(){n.history.forEach((function(e){n[e].check()}))}),e);t.forEach((function(e){return addEventListener(e,c)})),window.MutationObserver&&addEventListener("DOMContentLoaded",(function(){new MutationObserver(c).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}));var s=function(e){if("string"==typeof e){var t=[].slice.call(document.querySelectorAll(e));return n.history.indexOf(e)>-1?n[e].elements=t:(n[e]=(0,r.default)(t,i),n.history.push(e)),n[e]}};return s.offset=function(e){if(void 0===e)return i.offset;var t=function(e){return"number"==typeof e};return["top","right","bottom","left"].forEach(t(e)?function(t){return i.offset[t]=e}:function(n){return t(e[n])?i.offset[n]=e[n]:null}),i.offset},s.threshold=function(e){return"number"==typeof e&&e>=0&&e<=1?i.threshold=e:i.threshold},s.test=function(e){return"function"==typeof e?i.test=e:i.test},s.is=function(e){return i.test(e,i)},s.offset(0),s}};t.default=c()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,i){n(this,e),this.options=i,this.elements=t,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return i(e,[{key:"check",value:function(){var e=this;return this.elements.forEach((function(t){var n=e.options.test(t,e.options),i=e.current.indexOf(t),a=i>-1,r=!n&&a;n&&!a&&(e.current.push(t),e.emit("enter",t)),r&&(e.current.splice(i,1),e.emit("exit",t))})),this}},{key:"on",value:function(e,t){return this.handlers[e].push(t),this}},{key:"once",value:function(e,t){return this.singles[e].unshift(t),this}},{key:"emit",value:function(e,t){for(;this.singles[e].length;)this.singles[e].pop()(t);for(var n=this.handlers[e].length;--n>-1;)this.handlers[e][n](t);return this}}]),e}();t.default=function(e,t){return new a(e,t)}},function(e,t){"use strict";function n(e,t){var n=e.getBoundingClientRect(),i=n.top,a=n.right,r=n.bottom,o=n.left,c=n.width,s=n.height,l={t:r,r:window.innerWidth-o,b:window.innerHeight-i,l:a},u={x:t.threshold*c,y:t.threshold*s};return l.t>t.offset.top+u.y&&l.r>t.offset.right+u.x&&l.b>t.offset.bottom+u.y&&l.l>t.offset.left+u.x}Object.defineProperty(t,"__esModule",{value:!0}),t.inViewport=n},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){var i=n(5),a="object"==typeof self&&self&&self.Object===Object&&self,r=i||a||Function("return this")();e.exports=r},function(e,t,n){function i(e,t,n){function i(t){var n=v,i=O;return v=O=void 0,P=t,C=e.apply(i,n)}function u(e){return P=e,x=setTimeout(h,t),j?i(e):C}function d(e){var n=t-(e-S);return w?l(n,y-(e-P)):n}function p(e){var n=e-S;return void 0===S||n>=t||n<0||w&&e-P>=y}function h(){var e=r();return p(e)?f(e):void(x=setTimeout(h,d(e)))}function f(e){return x=void 0,k&&v?i(e):(v=O=void 0,C)}function g(){void 0!==x&&clearTimeout(x),P=0,v=S=O=x=void 0}function m(){return void 0===x?C:f(r())}function b(){var e=r(),n=p(e);if(v=arguments,O=this,S=e,n){if(void 0===x)return u(S);if(w)return x=setTimeout(h,t),i(S)}return void 0===x&&(x=setTimeout(h,t)),C}var v,O,y,C,x,S,P=0,j=!1,w=!1,k=!0;if("function"!=typeof e)throw new TypeError(c);return t=o(t)||0,a(n)&&(j=!!n.leading,y=(w="maxWait"in n)?s(o(n.maxWait)||0,t):y,k="trailing"in n?!!n.trailing:k),b.cancel=g,b.flush=m,b}var a=n(1),r=n(8),o=n(10),c="Expected a function",s=Math.max,l=Math.min;e.exports=i},function(e,t,n){var i=n(6),a=function(){return i.Date.now()};e.exports=a},function(e,t,n){function i(e,t,n){var i=!0,c=!0;if("function"!=typeof e)throw new TypeError(o);return r(n)&&(i="leading"in n?!!n.leading:i,c="trailing"in n?!!n.trailing:c),a(e,t,{leading:i,maxWait:t,trailing:c})}var a=n(7),r=n(1),o="Expected a function";e.exports=i},function(e,t){function n(e){return e}e.exports=n}])},PDpc:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("D57K"),a=n("Jzy8"),r=n("W9bu"),o=n("X0jn"),c=n("19Zn"),s=n("SKSx"),l=n("5xGT"),u=n("ZTXN"),d=n("g6G6"),p=n("KTx3"),h=n("6Oco"),f=n("TLy2"),g=n("8j5Y"),m=n("xVbo"),b=n("w1VY"),v=n("QoSw"),O=n("flPR"),y=n("sXdR"),C=n("EM62"),x=function(e){function t(t,n,i,a){var r=e.call(this,n)||this;return r.ll=t,r.state=n,r.linkService=i,r.diagToViewport=a,r._indicators=[],r.addSource=new u.a,r.removeSource=new u.a,r.changeSource=new u.a,r}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return this._indicators},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(f.a)((function(t){return e.removeIndicators(),"edit"===t?e.initForEditor():e.initForViewer()})));this.subs.push(t.subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.initForViewer=function(){var e=this;return Object(d.a)(this.addIndicators().pipe(Object(f.a)((function(){return e.handleClick()}))),this.listenToViewportChanges().pipe(Object(y.lodashThrottle)(300,{leading:!1,trailing:!0}),Object(g.a)((function(){return e.updateIndicators()}))))},t.prototype.initForEditor=function(){var e=this;return Object(d.a)(this.hyperlinkKeyEvent("keydown").pipe(Object(y.lodashThrottle)(300,{leading:!0,trailing:!1}),Object(f.a)((function(){return e.addIndicators()})),Object(f.a)((function(){return e.handleClick()}))),this.hyperlinkKeyEvent("keyup").pipe(Object(g.a)((function(){return e.removeIndicators()}))),this.listenToViewportChanges().pipe(Object(g.a)((function(){return e.removeIndicators()}))))},t.prototype.updateIndicators=function(){var e=this;this._indicators.forEach((function(t){e.positionIndicator(t),e.changeSource.next(t)}))},t.prototype.addIndicators=function(){var e=this;return this.ll.forCurrent(!0).getDiagramOnce().pipe(Object(g.a)((function(t){Object.keys(t.shapes).forEach((function(n){var i=t.shapes[n];i.getTextsWithHyperlinks().forEach((function(t){var n=new l.sb(0,0,t.width,t.height),a=e.getPoint(i,t),r=new s.a(t,a),o=c.C.getPointOnText(n,t.alignX,t.alignY);r.regX=o.x,r.regY=o.y,r.rotation=i.transform?i.transform.angle:0,e.positionIndicator(r),e._indicators.push(r),e.addSource.next(r)}))}))})))},t.prototype.getPoint=function(e,t){var n;if(e.isConnector()){var i=e;n=c.C.getPointOnConnector(i,t)}else{var a=e;n=c.C.getPointOnShape(t.position,a.defaultBounds,a.transform)}return n},t.prototype.handleClick=function(){var e=this;if(this.indicators.length>0){var t=this.indicators.map((function(t){var n=t.children.map((function(t){return Object(p.a)(t,"click").pipe(Object(g.a)((function(){return e.navigate(t)})))}));return d.a.apply(void 0,Object(i.j)(n))}));return d.a.apply(void 0,Object(i.j)(t))}return Object(h.b)()},t.prototype.hyperlinkKeyEvent=function(e){return Object(p.a)(window,e).pipe(Object(m.a)((function(e){return e.keyCode===o.f.Command||e.keyCode===o.f.Control})))},t.prototype.positionIndicator=function(e){e.x=this.diagToViewport.x(e.origin.x),e.y=this.diagToViewport.y(e.origin.y);var t=this.state.get("DiagramZoomLevel");e.scaleX=t,e.scaleY=t},t.prototype.removeIndicators=function(){for(;this._indicators.length>0;)this.removeSource.next(this._indicators.pop())},t.prototype.navigate=function(e){this.linkService.navigate(a.E.fromUrl(e.value))},t.prototype.listenToViewportChanges=function(){return Object(d.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel"))},t.\u0275fac=function(e){return new(e||t)(C.pc(v.a),C.pc(l.Gb),C.pc(r.a),C.pc(b.a))},t.\u0275prov=C.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(O.a)(),Object(i.g)("design:paramtypes",[v.a,l.Gb,r.a,b.a])],t)}(O.b)},Q0Yk:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("C05f"),a=n("xVbo"),r=n("BwBJ"),o=n("8j5Y"),c=n("5xGT"),s=n("EM62"),l=n("2kYt"),u=n("ys29"),d=n("8uPo"),p=["popoverOuter"];function h(e,t){if(1&e&&(s.gc(0,"thumbnail-image",8),s.xc(1,"async")),2&e){var n=s.wc(2);s.Bc("url",s.yc(1,2,n.libraryItemSubject).thumbnailUrl)("isPreview",!0)}}function f(e,t){if(1&e&&(s.gc(0,"thumbnail-canvas",9),s.xc(1,"async"),s.xc(2,"async"),s.xc(3,"async")),2&e){var n=s.wc(2);s.Uc(s.yc(1,6,n.libraryItemSubject).data.style),s.Bc("defId",s.yc(2,8,n.libraryItemSubject).data.defId)("version",s.yc(3,10,n.libraryItemSubject).data.version)("isPreview",!0)("focus",!1)}}function g(e,t){if(1&e&&(s.lc(0,"p"),s.ad(1),s.kc()),2&e){var n=s.wc(3);s.Sb(1),s.bd(n.text.title)}}function m(e,t){if(1&e&&(s.lc(0,"p"),s.ad(1),s.kc()),2&e){var n=s.wc(3);s.Sb(1),s.bd(n.text.line1)}}function b(e,t){if(1&e&&(s.lc(0,"p"),s.ad(1),s.kc()),2&e){var n=s.wc(3);s.Sb(1),s.bd(n.text.line2)}}function v(e,t){if(1&e&&(s.lc(0,"p"),s.ad(1),s.kc()),2&e){var n=s.wc(3);s.Sb(1),s.bd(n.text.line3)}}function O(e,t){if(1&e&&(s.lc(0,"p"),s.ad(1),s.kc()),2&e){var n=s.wc(3);s.Sb(1),s.bd(n.text.line4)}}function y(e,t){if(1&e&&(s.lc(0,"div",10),s.Yc(1,g,2,1,"p",11),s.gc(2,"p"),s.Yc(3,m,2,1,"p",11),s.gc(4,"p"),s.Yc(5,b,2,1,"p",11),s.gc(6,"p"),s.Yc(7,v,2,1,"p",11),s.gc(8,"p"),s.Yc(9,O,2,1,"p",11),s.gc(10,"p"),s.kc()),2&e){var n=s.wc(2);s.Sb(1),s.Bc("ngIf",n.text.title),s.Sb(2),s.Bc("ngIf",n.text.line1),s.Sb(2),s.Bc("ngIf",n.text.line2),s.Sb(2),s.Bc("ngIf",n.text.line3),s.Sb(2),s.Bc("ngIf",n.text.line4)}}var C=function(e){return{show:e}};function x(e,t){if(1&e&&(s.lc(0,"div",1,2),s.xc(2,"async"),s.lc(3,"div",3),s.lc(4,"div",4),s.Yc(5,h,2,4,"thumbnail-image",5),s.xc(6,"async"),s.Yc(7,f,4,12,"thumbnail-canvas",6),s.xc(8,"async"),s.kc(),s.Yc(9,y,11,5,"div",7),s.kc(),s.kc()),2&e){var n=s.wc();s.Vb("left-sidebar-popover-container ",n.popoverCssClass,""),s.Bc("ngClass",s.Fc(13,C,s.yc(2,7,n.showPopover))),s.Sb(5),s.Bc("ngIf","image"===s.yc(6,9,n.libraryItemSubject).thumbnailType),s.Sb(2),s.Bc("ngIf","canvas"===s.yc(8,11,n.libraryItemSubject).thumbnailType),s.Sb(2),s.Bc("ngIf",n.text)}}var S=function(){function e(e){this.state=e,this.showPopover=new i.a(!1),this.preparePopover=new i.a(!1),this.libraryItemSubject=new i.a(null),this.subs=[]}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.preparePopover.pipe(Object(a.a)((function(e){return!!e})),Object(r.a)(0),Object(o.a)((function(t){var n=e.state.get("CurrentLibraryPreview");e.position(n.x,n.y),e.showPopover.next(!0)}))).subscribe(),this.state.changes("CurrentLibraryPreview").subscribe((function(t){t&&Object.keys(t).length>0?(e.libraryItemSubject.next(t.item),e.text={title:t.item.text.title,line1:t.item.text.line1,line2:t.item.text.line2,line3:t.item.text.line3,line4:t.item.text.line4},e.popoverCssClass=t.item.popoverCssClass,e.prepare()):(e.showPopover.next(!1),e.preparePopover.next(!1))})))},e.prototype.prepare=function(){this.preparePopover.next(!0)},e.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.position=function(e,t){if(this.popoverOuter){var n=this.popoverOuter.nativeElement.getBoundingClientRect();n.height+t>=window.innerHeight?t=window.innerHeight-n.height-60:t<0?t=20:t-=75,this.popoverOuter.nativeElement.style.left=e+"px",this.popoverOuter.nativeElement.style.top=t+"px"}},e.\u0275fac=function(t){return new(t||e)(s.fc(c.Gb))},e.\u0275cmp=s.Zb({type:e,selectors:[["library-preview-popover"]],viewQuery:function(e,t){var n;(1&e&&s.ed(p,!0),2&e)&&(s.Jc(n=s.tc())&&(t.popoverOuter=n.first))},decls:2,vars:3,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["popoverOuter",""],[1,"lib-preview-tile-container","fx-ellipsis"],[1,"lib-preview-thumbnail","fx-center-all"],["class","shape-thumbnail-image",3,"url","isPreview",4,"ngIf"],["class","shape-thumbnail-image","canvasIdPrefix","thumb-preview",3,"defId","version","style","isPreview","focus",4,"ngIf"],["class","lib-preview-text",4,"ngIf"],[1,"shape-thumbnail-image",3,"url","isPreview"],["canvasIdPrefix","thumb-preview",1,"shape-thumbnail-image",3,"defId","version","isPreview","focus"],[1,"lib-preview-text"],[4,"ngIf"]],template:function(e,t){1&e&&(s.Yc(0,x,10,15,"div",0),s.xc(1,"async")),2&e&&s.Bc("ngIf",s.yc(1,1,t.preparePopover))},directives:[l.t,l.q,u.a,d.a],pipes:[l.b],styles:[".left-sidebar-popover-container[_ngcontent-%COMP%]{position:absolute;border:1px solid #d3d3e7;opacity:0;transition:opacity .3s linear;background-color:#fff;z-index:2}.left-sidebar-popover-container[_ngcontent-%COMP%]   .lib-preview-tile-container[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;width:200px;height:170px}.left-sidebar-popover-container[_ngcontent-%COMP%]   .lib-preview-thumbnail[_ngcontent-%COMP%]{flex:1}.left-sidebar-popover-container[_ngcontent-%COMP%]   .lib-preview-text[_ngcontent-%COMP%]{text-align:center;padding:10px 15px 15px;white-space:normal;line-height:20px}.left-sidebar-popover-container.show[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),e}()},Q4Fx:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return k}));var i,a=n("C05f"),r=n("ROBh"),o=n("YtkY"),c=n("wqq/"),s=n("TLy2"),l=n("xVbo"),u=n("Ohay"),d=n("8j5Y"),p=n("nsO7"),h=n("5xGT"),f=n("NNJu"),g=n("4y1S"),m=n("QoSw"),b=n("ZZOX"),v=n("fqe/"),O=n("onas"),y=n("C5+t"),C=n("yn08"),x=n("EM62"),S=n("s2Ay"),P=["panelContainer"],j=["expandPanelButton"],w=["panelItem"];!function(e){e.Closed="closed",e.Opening="opening",e.Opened="opened",e.Expanding="expanding",e.Expanded="expanded",e.Shrinking="shrinking",e.Collapsing="collapsing",e.Closing="closing"}(i||(i={}));var k=function(){function e(e,t,n,r,s,l,u,d){this.ll=e,this.state=t,this.containerEnv=n,this.translate=r,this.modalController=s,this.userLocator=l,this.authentication=u,this.appNavConfigInterpreter=d,this.isUserPaused=new a.a(!1),this.showAccountButton=new a.a(!0),this.isSidebarExpanded=new a.a(!1),this.subs=[],this.openedWidth=215,this.expandedWidth=890,this.buttons=new a.a(this.getSidebarButtons()),this.manifests=this.state.changes("EnabledPlugins").pipe(Object(o.a)((function(e){return Object(p.filter)(e,(function(e){return e.panels&&Object(p.some)(e.panels,["position","left"])}))})),Object(c.a)(1)),this.currentState=i.Closed}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(s.a)((function(e){return""===e||"start"===e?Object(r.a)(!1):Object(r.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(y.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logoutUrl",{get:function(){return h.j.get("COGNITO_LOGOUT_URL")+"?client_id="+h.j.get("COGNITO_CLIENT_ID")+"&logout_uri="+h.j.get("COGNITO_LOGOUT_REDIRECT_URL")},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.projectId=this.ll.forCurrentObserver(!1).pipe(Object(s.a)((function(e){return e.getDiagramModel().pipe(Object(l.a)((function(e){return Boolean(e&&e.project)})),Object(o.a)((function(e){return"string"==typeof e.project?e.project:e.project.id})))}))),this.listenToShapeSearchResults(),this.listenToCurrentUserChanges(),this.listenToAppNavInterpreter()},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(u.a)(),Object(d.a)((function(t){return e.isUserPaused.next(t)})))},e.prototype.toggleExpand=function(){this.currentState===i.Opened||this.currentState===i.Closed?this.goToNextState(i.Expanded):this.currentState===i.Expanded&&this.goToNextState(i.Closed)},e.prototype.getIcon=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.prototype.getSelectedPanelId=function(){return this.selectedPanelId},e.prototype.toggleDashboard=function(){"plugin"===h.j.get("APP_MODE")||this.state.get("ApplicationIsEmbedded")||this.togglePanel("dashboard")},e.prototype.togglePanel=function(e){this.resetMouseControlState();var t=this.getPanel(e),n=t.isExpandable,i=this.toggleOpen(e,n);this.switchPanel(e),this.isSidebarExpanded.next(t.expandSidebar&&i)},e.prototype.resetMouseControlState=function(){var e=this.state.get("MouseControlState");[C.b.Text,C.b.Connector,C.b.Pen,C.b.Highlighter].includes(e)&&this.state.set("MouseControlState",C.b.Normal)},e.prototype.openTeamPortalOverview=function(){h.Ib.track("left.account.click",{value1Type:"button",value1:"overview"}),this.openTeamPortalWindow(O.b.Overview)},e.prototype.openClassicDiagramImport=function(){h.Ib.track("left.account.click",{value1Type:"button",value1:"classic diagram import"}),this.modalController.show(b.a)},e.prototype.openTeamPortalAccount=function(){h.Ib.track("left.account.click",{value1Type:"button",value1:"my account"}),this.openTeamPortalWindow(O.b.Account)},e.prototype.logout=function(){var e=this;h.Ib.track("left.account.click",{value1Type:"button",value1:"signout"}),this.state.set("LoadingIndicatorState",{main:!0,description:this.translate.instant("LOADING_WINDOWS.LOGOUT")}),delete localStorage.appReloadedForOffline,this.authentication.logOut().subscribe({complete:function(){return e.redirect(e.logoutUrl)}})},e.prototype.getExpandTooltip=function(){return this.currentState===i.Expanded?this.translate.instant("TOOLTIPS.COLLAPSE_PANEL"):this.translate.instant("TOOLTIPS.EXPAND_PANEL")},e.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.getLogoTooltip=function(){return"plugin"===h.j.get("APP_MODE")?this.translate.instant("TOOLTIPS.BACK_CONFLUENCE"):this.state.get("ApplicationIsEmbedded")?"Creately":this.translate.instant("TOOLTIPS.DASHBOARD")},e.prototype.listenToShapeSearchResults=function(){var e=this;this.subs.push(this.state.changes("ShapeSearchResults").subscribe((function(t){t.results.length>0?(e.showHideLeftSideButton("search",!0),e.state.set("SelectedLeftPanel","search")):e.showHideLeftSideButton("search",!1)})),this.state.changes("SelectedLeftPanel").subscribe((function(t){e.setSelectedPanelId(t)})),this.checkUserPauseStatus().subscribe())},e.prototype.listenToCurrentUserChanges=function(){var e=this;this.userMdl=this.userLocator.getUserData(),this.subs.push(this.userMdl.pipe(Object(l.a)((function(e){return!!e}))).subscribe((function(t){t.status===g.A.DEMO?e.showAccountButton.next(!1):e.showAccountButton.next(!0)})))},e.prototype.setState=function(e){this.currentState=e,this.state.set("LeftSidebarState",e)},e.prototype.transitionState=function(e,t){var n,a,r={width:"0",transform:"translateX(-"+this.openedWidth+"px)"},o={width:this.openedWidth+"px",transform:"translateX(0)"},c={width:this.expandedWidth+"px",transform:"translateX(0)"};switch(e){case i.Closed:n=r;break;case i.Opened:n=o;break;case i.Expanded:n=c}switch(t){case i.Closed:a=r;break;case i.Opened:a=o;break;case i.Expanded:a=c}var s=new f.e({from:n,to:a,transitionProperty:"width, transform",duration:300,easing:"ease-in-out"});return s.element=this.panelContainer.nativeElement,s},e.prototype.showHideLeftSideButton=function(e,t){var n=this.buttons.getValue();n.find((function(t){return t.id===e})).visible=t,this.buttons.next(n)},e.prototype.toggleOpen=function(e,t){return this.currentState!==i.Opened&&this.currentState!==i.Expanded||this.selectedPanelId!==e?(t||this.currentState!==i.Closed?!t||this.currentState!==i.Closed&&this.currentState!==i.Opened||this.goToNextState(i.Expanded):this.goToNextState(i.Opened),!0):(this.goToNextState(i.Closed),!1)},e.prototype.switchPanel=function(e){this.state.set("SelectedLeftPanel",e),h.Ib.track("left."+e+".click")},e.prototype.goToNextState=function(e){var t=this;if(this.currentState!==e){var n,a=this.currentState;switch(a){case i.Closed:e===i.Opened?n=i.Opening:e===i.Expanded&&(n=i.Expanding);break;case i.Opened:e===i.Expanded?n=i.Expanding:e===i.Closed&&(n=i.Closing);break;case i.Expanded:e===i.Opened?n=i.Shrinking:e===i.Closed&&(n=i.Collapsing)}n&&this.setState(n),this.subs.push(this.transitionState(a,e).start().pipe(Object(d.a)({complete:function(){return t.setState(e)}})).subscribe())}},e.prototype.setSelectedPanelId=function(e){this.selectedPanelId=e;var t=this.getPanel(e);this.isSidebarExpanded.next(t.expandSidebar),void 0!==t.onOpen&&t.onOpen(),t.isExpandable?this.enableExpand():this.disableExpand()},e.prototype.getPanel=function(e){return this.panelItems.filter((function(t){return t.id===e}))[0]},e.prototype.openTeamPortalWindow=function(e){void 0===e&&(e=O.b.Overview),this.modalController.show(O.c,{inputs:{page:e}})},e.prototype.enableExpand=function(){this.isExpandable=!0,this.currentState!==i.Opened&&this.currentState!==i.Closed||this.goToNextState(i.Expanded),this.subs.push(this.toggleExpandButton().start().subscribe())},e.prototype.disableExpand=function(){this.isExpandable=!1,this.currentState===i.Expanded&&this.goToNextState(i.Opened),this.subs.push(this.toggleExpandButton(!1).start().subscribe())},e.prototype.toggleExpandButton=function(e){void 0===e&&(e=!0);var t={transform:"translateX(25px)"},n={transform:"translateX(-2px)"},i=n,a=t;e||(i=t,a=n);var r=new f.e({from:i,to:a,transitionProperty:"transform",duration:200,easing:"ease-in-out"});return r.element=this.expandPanelButton.nativeElement,r},e.prototype.getSidebarButtons=function(){var e=[{id:"template",icon:"templates",tooltip:"TOOLTIPS.TEMPLATE",name:"LABELS.TEMPLATES",visible:!0,disableWithApp:!0},{id:"shapes",icon:"shapes",tooltip:"TOOLTIPS.SHAPES",name:"LABELS.SHAPES",visible:!0,disableWithApp:!0},{id:"image-import",icon:"image",tooltip:"TOOLTIPS.IMAGE",name:"LABELS.IMAGES",visible:!0,disableWithApp:!0},{id:"search",icon:"search",tooltip:"TOOLTIPS.SEARCH_RESULTS",name:"TOOLTIPS.SEARCH_RESULTS",visible:!1,disableWithApp:!0},{id:"google-search-import",icon:"google",tooltip:"TOOLTIPS.GOOGLE_SEARCH",name:"LABELS.GOOGLE_SEARCH",visible:!0,disableWithApp:!0},{id:"icons",icon:"stickers",tooltip:"TOOLTIPS.ICONS",name:"LABELS.ICONS",visible:!0,disableWithApp:!0}];return"plugin"===h.j.get("APP_MODE")||this.state.get("ApplicationIsEmbedded")||e.unshift({id:"folders",icon:"folder-thin",tooltip:"TOOLTIPS.FOLDER",name:"LABELS.FOLDERS",visible:!0,disableWithApp:!1}),e},e.prototype.redirect=function(e){window.location.replace(e)},e.prototype.listenToAppNavInterpreter=function(){var e=this;this.appNavConfigInterpreter.listenToTag("left-side-bar").pipe(Object(d.a)((function(t){e.state.set("SelectedLeftPanel",t[0]),e.state.set("TemplateCategorySelected",t[1])}))).subscribe()},e.\u0275fac=function(t){return new(t||e)(x.fc(m.a),x.fc(h.Gb),x.fc(h.C),x.fc(S.e),x.fc(h.db),x.fc(g.x),x.fc(v.a),x.fc(h.l))},e.\u0275dir=x.ac({type:e,viewQuery:function(e,t){var n;(1&e&&(x.Tc(P,!0),x.Tc(j,!0),x.ed(w,!0)),2&e)&&(x.Jc(n=x.tc())&&(t.panelContainer=n.first),x.Jc(n=x.tc())&&(t.expandPanelButton=n.first),x.Jc(n=x.tc())&&(t.panelItems=n))}}),e}()},S0Xf:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var i=n("ZTXN"),a=n("mWib"),r=n("iV8b"),o=n("EM62"),c=n("2kYt"),s=n("D57K"),l=n("Jzy8"),u=n("c7W3"),d=n("5xGT"),p=n("X0jn"),h=n("NNJu"),f=n("C05f"),g=n("ROBh"),m=n("xVbo"),b=n("Ohay"),v=n("TLy2"),O=n("J+dc"),y=n("4e/d"),C=n("8j5Y"),x=n("7ntQ"),S=n("4y1S"),P=n("nsO7"),j=n("JupZ"),w=n("xnGY"),k=n("B/3P"),E=n("P1E4"),I=n("yn08"),T=n("C5+t"),_=n("RTAa"),M=n("sEIs"),D=n("K0+f"),A=n("/ege"),R=n("thzy"),L=n("jHi0"),B=n("s2Ay"),N=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["thumbnail-loader"]],decls:14,vars:0,consts:[[1,"thumbnail-loader-container","white","fx-center-all"],[1,"thumbnail-loader-inner"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24.51 30"],["x","8.15","y","5.71","width","7.91","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","3.72","y","14.88","width","6.24","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","3.2","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","10.31","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","17.2","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","14.2","y","14.88","width","6.24","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x1","12.11","y1","8.27","x2","12.11","y2","12.83",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","6.9 15.24 6.9 12.35 17.32 12.35 17.32 15.33",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","17.32 16.17 17.32 19.81 5.39 19.81 5.39 22.87",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["x1","12.5","y1","22.87","x2","12.5","y2","19.81",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","19.39 22.87 19.39 19.81 17.04 19.81",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.lc(1,"div",1),o.vc(),o.lc(2,"svg",2),o.gc(3,"rect",3),o.gc(4,"rect",4),o.gc(5,"rect",5),o.gc(6,"rect",6),o.gc(7,"rect",7),o.gc(8,"rect",8),o.gc(9,"line",9),o.gc(10,"polyline",10),o.gc(11,"polyline",11),o.gc(12,"line",12),o.gc(13,"polyline",13),o.kc(),o.kc(),o.kc())},styles:[".thumbnail-loader-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:10px;left:0}.thumbnail-loader-inner[_ngcontent-%COMP%]{width:70px;height:75px}"],changeDetection:0}),e}(),U=n("uIWG"),F=["svgImageElement"],Y=["dropdown"];function G(e,t){if(1&e&&(o.lc(0,"div",9),o.gc(1,"nu-badge",10),o.kc()),2&e){var n=o.wc();o.Sb(1),o.Bc("badgeText",n.status.label)("bgColor",n.status.bgColor)("textColor",n.status.textColor)}}function H(e,t){1&e&&(o.lc(0,"div",11),o.vc(),o.lc(1,"svg",12),o.gc(2,"use",13),o.kc(),o.uc(),o.lc(3,"span",14),o.lc(4,"p",15),o.ad(5,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.HEADING"),o.kc(),o.lc(6,"p",16),o.ad(7,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.DESCRIPTION"),o.kc(),o.kc(),o.kc())}function V(e,t){1&e&&o.gc(0,"thumbnail-loader")}function W(e,t){if(1&e&&(o.lc(0,"div",17),o.Yc(1,V,1,0,"thumbnail-loader",18),o.xc(2,"async"),o.gc(3,"div",19,20),o.kc()),2&e){var n=o.wc();o.Sb(1),o.Bc("ngIf",!o.yc(2,1,n.thumbnailSVG))}}function X(e,t){1&e&&(o.lc(0,"div",21),o.gc(1,"img",22),o.kc())}var K=function(e){return{value1Type:"diagramId",value1:e}},z=function(e){return{event:"center.diagram.open.click",data:e}};function q(e,t){if(1&e){var n=o.mc();o.lc(0,"a",26),o.sc("click",(function(){o.Mc(n);var e=o.wc(2);return e.navToSelectedDiagram(e.id)})),o.ad(1),o.kc()}if(2&e){var i=o.wc(2);o.Bc("trackAction",o.Fc(4,z,o.Fc(2,K,i.id))),o.Sb(1),o.cd(" ",i.name," ")}}function J(e,t){if(1&e){var n=o.mc();o.lc(0,"editable-label",27),o.sc("changedText",(function(e){return o.Mc(n),o.wc(2).renameDiagram(e)})),o.kc()}if(2&e){var i=o.wc(2);o.Bc("value",i.name)("focus",!0)("selectAll",!0)("readonly",!1)}}function Z(e,t){if(1&e&&(o.lc(0,"div",23),o.Yc(1,q,2,6,"a",24),o.Yc(2,J,1,4,"editable-label",25),o.kc()),2&e){var n=t.ngIf;o.Sb(1),o.Bc("ngIf","inactive"===n),o.Sb(1),o.Bc("ngIf","active"===n)}}function Q(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.sc("click",(function(){return o.Mc(n),o.wc(3).enableRenameMode()})),o.ad(1,"DIAGRAM_FEATURE.RENAME"),o.kc()}}function $(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.sc("click",(function(){return o.Mc(n),o.wc(3).duplicateDiagram()})),o.xc(1,"async"),o.ad(2,"DIAGRAM_FEATURE.DUPLICATE"),o.kc()}if(2&e){var i=o.wc(3);o.Xb("disabled",i.isUserPaused||0===o.yc(1,2,i.appConnectionStatus))}}function ee(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.sc("click",(function(){o.Mc(n);var e=o.wc(3);return e.moveDiagram(e.id)})),o.xc(1,"async"),o.ad(2,"DIAGRAM_FEATURE.MOVE"),o.kc()}if(2&e){var i=o.wc(3);o.Xb("disabled",0===o.yc(1,2,i.appConnectionStatus))}}function te(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.sc("click",(function(){return o.Mc(n),o.wc(3).showDeleteConfimationDialog()})),o.xc(1,"async"),o.ad(2,"DIAGRAM_FEATURE.DELETE"),o.kc()}if(2&e){var i=o.wc(3);o.Xb("disabled",0===o.yc(1,2,i.appConnectionStatus))}}function ne(e,t){if(1&e&&(o.vc(),o.uc(),o.lc(0,"div",34),o.Yc(1,Q,2,0,"a",35),o.Yc(2,$,3,4,"a",36),o.Yc(3,ee,3,4,"a",36),o.xc(4,"async"),o.Yc(5,te,3,4,"a",36),o.kc()),2&e){var n=o.wc().ngLet,i=o.wc();o.Sb(1),o.Bc("ngIf",5===n||0===n),o.Sb(1),o.Bc("ngIf",5===n||0===n),o.Sb(1),o.Bc("ngIf",0===n&&o.yc(4,4,i.projectCount)>1),o.Sb(2),o.Bc("ngIf",0===n)}}function ie(e,t){if(1&e&&(o.lc(0,"div",28,29),o.lc(2,"button",30),o.vc(),o.lc(3,"svg",31),o.gc(4,"use",32),o.kc(),o.kc(),o.Yc(5,ne,6,6,"div",33),o.kc()),2&e){var n=t.ngLet;o.Sb(2),o.Bc("disabled",5!==n&&0!==n),o.Sb(3),o.Bc("ngIf",5===n||0===n)}}var ae=function(){function e(e,t,n,i,a,r,o,c,s,l,u,d,p,h){this.resourceLoader=e,this.state=t,this.commandService=n,this.modalController=i,this.dialogBoxController=a,this.rolePermService=r,this.router=o,this.random=c,this.logger=s,this.planPermManager=l,this.documentManage=u,this.elementRef=d,this.modelSubManager=p,this.diagramNavigation=h,this.renameMode=new f.a("inactive"),this.showBrokenThumbnail=new f.a(!1),this.enteredToViewport=new f.a(!1),this._thumbnailUrl=new f.a(void 0),j.offset({bottom:-400})}return Object.defineProperty(e.prototype,"isCurrent",{get:function(){return this.state.get("CurrentDiagram")===this.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollCheck",{set:function(e){!this.enteredToViewport.value&&j.is(this.elementRef.nativeElement)&&this.enteredToViewport.next(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailUrl",{set:function(e){this._thumbnailUrl.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailUrlSub",{get:function(){return this._thumbnailUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(T.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.thumbnailSVG=this._thumbnailUrl.pipe(Object(m.a)((function(e){return e&&e.length>0})),Object(b.a)(),Object(v.a)((function(t){var n=t.split("?")[0];return e.enteredToViewport.pipe(Object(m.a)((function(e){return!!e})),Object(O.a)(1),Object(v.a)((function(){return e.resourceLoader.forceLoad(t,n).pipe(Object(y.a)((function(t){return d.ab.warning("Thumbnail loading failed for diagram:",e.id),e.showBrokenThumbnail.next(!0),Object(g.a)(void 0)})),Object(C.a)((function(t){return e.svgImageElement.nativeElement.innerHTML=t})))})))}))),this.roleObs=this.rolePermService.getCurrentUserRole(this.id).pipe(Object(x.a)())},e.prototype.showOptDropdown=function(){this.dropdown&&!this.isUserPaused&&(this.dropdown.nativeElement.style.display="block")},e.prototype.hideOptDropdown=function(){this.dropdown&&!this.isUserPaused&&(this.dropdown.nativeElement.style.display="none")},e.prototype.showDeleteConfimationDialog=function(){var e=this;d.Ib.track("left.folder.document.delete.click",{value1Type:"diagramId",value1:this.id});var t={id:"left-sb-delete-diagram-confirmation",heading:"DIALOG_BOX.DELETE_DIAGRAM.HEADING",description:"DIALOG_BOX.DELETE_DIAGRAM.DESCRIPTION",descriptionParams:{diagramName:this.name},type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.DELETE_DIAGRAM",clickHandler:function(){return e.deleteDiagram()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){d.Ib.track("dialog.diagramdelete.cancel.click",{value1Type:"diagramId",value1:e.id})}}]};this.dialogBoxController.showDialog(t)},e.prototype.duplicateDiagram=function(){d.Ib.track("left.folder.document.duplicate.click",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")});var e=this.random.diagramId();this.logger.debug("Creating diagram from template. Diagram id : "+e+" Template id "+this.id),this.dispatchCreateCommand({id:e,templateId:this.id,type:"duplicate"})},e.prototype.renameDiagram=function(e){d.Ib.track("left.folder.document.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.renameMode.next("inactive"),this.commandService.dispatch(u.a.renameDiagram,this.id,{name:e})},e.prototype.enableRenameMode=function(){d.Ib.track("left.folder.document.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.renameMode.next("active"),this.hideOptDropdown()},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.state.get("CurrentDiagram");"start"!==n?n===e?this.state.set("SelectedLeftPanel","shapes"):this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(O.a)(1),Object(C.a)((function(){t.state.get("InterfaceControlState")===I.a.View?t.diagramNavigation.navigateToDiagram(e,"view"):t.diagramNavigation.navigateToDiagram(e,"edit")}))).subscribe():this.state.get("InterfaceControlState")===I.a.View?this.diagramNavigation.navigateToDiagram(e,"view"):this.diagramNavigation.navigateToDiagram(e,"edit")},e.prototype.deleteDiagram=function(){d.Ib.track("left.folder.document.delete.click",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")});var e=this.getNextAvailDiagram(this.id);this.documentManage.deleteDiagram(this.id,e).subscribe()},e.prototype.moveDiagram=function(e){d.Ib.track("left.folder.document.move.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.modalController.show(l.p,{inputs:{diagramIds:[e],name:this.name,sourceProjectId:this.state.get("FolderPanelSelectedProject")}})},e.prototype.dispatchCreateCommand=function(e){var t,n=this;if(this.planPermManager.check([p.m.DIAGRAM_CREATE]))t=E.a.createDiagram;else if(this.planPermManager.check([p.m.DIAGRAM_CREATE_PRIVATE]))t=E.a.createDiagramPrivate;else{if(!this.planPermManager.check([p.m.DIAGRAM_CREATE_PUBLIC]))throw new S.l("Diagram create permission is denied",Object(s.a)(Object(s.a)({},k.a[p.m.DIAGRAM_CREATE_PUBLIC]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.m.DIAGRAM_CREATE_PUBLIC)}}));t=E.a.createDiagramPublic}var i=this.state.get("FolderPanelSelectedProject");this.logger.debug("Creating diagram with id : "+e.id),this.commandService.dispatch(t,i,e).subscribe({error:function(e){n.handleDiagramPermissionError(e)},complete:function(){n.gotoEditor(e.id)}})},e.prototype.handleDiagramPermissionError=function(e){if(1615===e.code)throw new S.l("Diagram create permission is denied by creator",Object(s.a)(Object(s.a)({},k.a[p.m.DIAGRAM_CREATE]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.m.DIAGRAM_CREATE)}}));if(1611===e.code)throw new S.l("Diagram create permission is denied by creator",Object(s.a)(Object(s.a)({},k.a[p.m.DIAGRAM_CREATE_PUBLIC]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.m.DIAGRAM_CREATE_PUBLIC)}}));if(1612===e.code)throw new S.l("Diagram create permission is denied by creator",Object(s.a)(Object(s.a)({},k.a[p.m.DIAGRAM_CREATE_PRIVATE]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.m.DIAGRAM_CREATE_PRIVATE)}}))},e.prototype.gotoEditor=function(e){this.router.navigate(["../",e,"edit"])},e.prototype.getNextAvailDiagram=function(e){var t=this.state.get("FolderPanelSelectedTab");if("diagrams"===t){var n=this.state.get("FolderPanelSelectedProject");n===l.B.SHARED_HOME&&(n=l.B.HOME);var i=Object(P.clone)(this.state.get("ProjectDiagrams")[n]);if(i&&i.length>1)return i.reverse(),this.findNextAvailDiagram(i,e)}else if("recent"===t){var a=this.state.get("RecentDiagrams");if(a&&a.length>1)return this.findNextAvailDiagram(a,e)}return""},e.prototype.findNextAvailDiagram=function(e,t){var n=e.findIndex((function(e){return e.id===t})),i=e[n+1];return i?i.id:e[0].id},e.\u0275fac=function(t){return new(t||e)(o.fc(d.Ab),o.fc(d.Gb),o.fc(d.y),o.fc(d.db),o.fc(h.h),o.fc(l.C),o.fc(M.d),o.fc(d.pb),o.fc(d.ab),o.fc(S.o),o.fc(l.m),o.fc(o.r),o.fc(w.d),o.fc(_.a))},e.\u0275cmp=o.Zb({type:e,selectors:[["diagram-thumbnail-item"]],viewQuery:function(e,t){var n;(1&e&&(o.ed(F,!0),o.ed(Y,!0)),2&e)&&(o.Jc(n=o.tc())&&(t.svgImageElement=n.first),o.Jc(n=o.tc())&&(t.dropdown=n.first))},inputs:{name:"name",isUserPaused:"isUserPaused",projectCount:"projectCount",id:"id",status:"status",scrollCheck:"scrollCheck",thumbnailUrl:"thumbnailUrl"},features:[o.Rb([d.Ab])],decls:13,vars:21,consts:[[1,"thumbnail-item",3,"mouseenter","mouseleave"],["class","thumbnail-item-badge",4,"ngIf"],["tooltip","","placement","bottom","class","thumbnail-item-lock",4,"ngIf"],[3,"trackAction","click"],[1,"diagram-thumbnail-item-img-container"],["class","white fx-center-all",4,"ngIf"],["class","diagram-thumbnail-item-broken-image fx-center-all",4,"ngIf"],["class","thumbnail-item-text fx-center-all",4,"ngIf"],["class","thumbnail-dd",4,"ngLet"],[1,"thumbnail-item-badge"],[3,"badgeText","bgColor","textColor"],["tooltip","","placement","bottom",1,"thumbnail-item-lock"],[1,"nu-icon","nu-ic-lock"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-lock"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"],[1,"white","fx-center-all"],[4,"ngIf"],[1,"diagram-thumbnail-item-img"],["svgImageElement",""],[1,"diagram-thumbnail-item-broken-image","fx-center-all"],["src","./assets/images/broken-image.svg","width","65"],[1,"thumbnail-item-text","fx-center-all"],["class","thumbnail-item-inner dark-blue",3,"trackAction","click",4,"ngIf"],[3,"value","focus","selectAll","readonly","changedText",4,"ngIf"],[1,"thumbnail-item-inner","dark-blue",3,"trackAction","click"],[3,"value","focus","selectAll","readonly","changedText"],[1,"thumbnail-dd"],["dropdown",""],[1,"thumbnail-dd-button","nu-btn-med","secondary",3,"disabled"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["class","thumbnail-dd-item",4,"ngIf"],[1,"thumbnail-dd-item"],["translate","",3,"click",4,"ngIf"],["translate","",3,"disabled","click",4,"ngIf"],["translate","",3,"click"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.sc("mouseenter",(function(){return t.showOptDropdown()}))("mouseleave",(function(){return t.hideOptDropdown()})),o.Yc(1,G,2,3,"div",1),o.Yc(2,H,8,0,"div",2),o.lc(3,"a",3),o.sc("click",(function(){return t.navToSelectedDiagram(t.id)})),o.lc(4,"div",4),o.Yc(5,W,5,3,"div",5),o.xc(6,"async"),o.Yc(7,X,2,0,"div",6),o.xc(8,"async"),o.kc(),o.kc(),o.Yc(9,Z,3,2,"div",7),o.xc(10,"async"),o.Yc(11,ie,6,2,"div",8),o.xc(12,"async"),o.kc()),2&e&&(o.Xb("selected",t.isCurrent),o.Sb(1),o.Bc("ngIf","none"!==t.status.id),o.Sb(1),o.Bc("ngIf",t.isUserPaused),o.Sb(1),o.Bc("trackAction",o.Fc(19,z,o.Fc(17,K,t.id))),o.Sb(2),o.Bc("ngIf",o.yc(6,9,t.thumbnailUrlSub)),o.Sb(2),o.Bc("ngIf",o.yc(8,11,t.showBrokenThumbnail)),o.Sb(2),o.Bc("ngIf",o.yc(10,13,t.renameMode)),o.Sb(2),o.Bc("ngLet",o.yc(12,15,t.roleObs)))},directives:[c.t,D.a,A.a,R.a,L.a,B.a,N,U.a],pipes:[c.b],styles:[".thumbnail-item[_ngcontent-%COMP%]{border:1px solid #d3d3e7;border-radius:4px;cursor:pointer;display:block;color:#04263d;position:relative;margin-bottom:10px;background-color:#fff;box-shadow:0 2px 2px #c3c3de;width:196px}.thumbnail-item.selected[_ngcontent-%COMP%], .thumbnail-item[_ngcontent-%COMP%]:hover{border:1px solid #fff6e1}.thumbnail-item[_ngcontent-%COMP%]:hover   .project-thumbnail-dd[_ngcontent-%COMP%]{display:inline-block}.thumbnail-item-text[_ngcontent-%COMP%]{height:50px;position:relative}.thumbnail-item-lock[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;z-index:1}.thumbnail-item-lock[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#aaa}.thumbnail-dd[_ngcontent-%COMP%]{position:absolute;top:5px;right:0;display:none}.thumbnail-dd[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.thumbnail-dd-button[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.thumbnail-item-inner[_ngcontent-%COMP%]{max-height:40px;line-height:20px;overflow:hidden;padding-left:30px;padding-right:30px;word-break:break-word}.thumbnail-dd-item[_ngcontent-%COMP%]{width:100px;padding:10px;background:#fff;border:1px solid #dcdcdc;border-radius:4px;display:none;position:absolute;z-index:1;right:0}.thumbnail-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.thumbnail-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.thumbnail-dd[_ngcontent-%COMP%]:hover   .thumbnail-dd-item[_ngcontent-%COMP%]{display:block}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%]{overflow:hidden;text-align:center;height:135px;padding:20px 20px 0}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;position:relative;height:115px}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%]   .diagram-thumbnail-broken[_ngcontent-%COMP%]{margin-left:10px}.diagram-thumbnail-item-img[_ngcontent-%COMP%]{max-height:100%;max-width:100%}.diagram-thumbnail-item-img[_ngcontent-%COMP%]  svg{max-height:115px;max-width:152px}editable-label[_ngcontent-%COMP%]  .editable-label-container{width:140px}.thumbnail-item-badge[_ngcontent-%COMP%]{position:absolute;padding:5px;z-index:10}.thumbnail-item[_ngcontent-%COMP%]:hover   .thumbnail-item-badge[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),e}();function re(e,t){if(1&e&&(o.gc(0,"diagram-thumbnail-item",2),o.xc(1,"async"),o.xc(2,"async")),2&e){var n=t.$implicit,i=o.wc();o.Bc("id",null==n?null:n.id)("name",null==n?null:n.name)("status",i.getDocumentStatus(null==n?null:n.status))("scrollCheck",o.yc(1,7,i.scroll))("thumbnailUrl",null==n?null:n.thumbnailUrl)("projectCount",i.projectCount)("isUserPaused",o.yc(2,9,i.isUserPaused))}}var oe=function(e){return{"diagram-list-area-three-columns":e}},ce=function(){function e(t){this.docStatus=t,this._columnCount=1,this._scroll=new i.a,this.scroll=this._scroll.pipe(Object(a.a)(e.scrollDebounce))}return Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnCount},set:function(e){this._columnCount=e},enumerable:!1,configurable:!0}),e.prototype.getDocumentStatus=function(e){return this.docStatus.getDocumentStatus(e)},e.prototype.getDiagramTrackId=function(e,t){return t.id},e.prototype.onScroll=function(e){this._scroll.next(e)},e.scrollDebounce=400,e.\u0275fac=function(t){return new(t||e)(o.fc(r.a))},e.\u0275cmp=o.Zb({type:e,selectors:[["diagram-list-area"]],inputs:{diagramList:"diagramList",projectCount:"projectCount",isUserPaused:"isUserPaused",columnCount:"columnCount"},decls:3,vars:7,consts:[[1,"diagram-list-area-container","diagram-list-area-grid",3,"ngClass"],[3,"id","name","status","scrollCheck","thumbnailUrl","projectCount","isUserPaused",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","name","status","scrollCheck","thumbnailUrl","projectCount","isUserPaused"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.Yc(1,re,3,11,"diagram-thumbnail-item",1),o.xc(2,"async"),o.kc()),2&e&&(o.Bc("ngClass",o.Fc(5,oe,3===t.columnCount)),o.Sb(1),o.Bc("ngForOf",o.yc(2,3,t.diagramList))("ngForTrackBy",t.getDiagramTrackId))},directives:[c.q,c.s,ae],pipes:[c.b],styles:[".diagram-list-area-grid.diagram-list-area-three-columns[_ngcontent-%COMP%]{display:inline-grid;grid-template-columns:repeat(auto-fit,minmax(195px,195px));grid-row-gap:16px;grid-column-gap:18px;width:100%}.diagram-list-area-grid.diagram-list-area-three-columns[_ngcontent-%COMP%]   diagram-thumbnail-item[_ngcontent-%COMP%]{width:31%;margin-right:7px;margin-left:7px}"],changeDetection:0}),e}()},Sf0Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("2kYt"),a=n("nIj0"),r=n("s2Ay"),o=n("5xGT"),c=n("NNJu"),s=n("z3tU"),l=n("IOVY"),u=n("A7ZO"),d=n("8EYK"),p=n("aSzn"),h=n("xcrX"),f=n("6qzS"),g=n("EM62"),m=function(){function e(){}return e.\u0275mod=g.dc({type:e}),e.\u0275inj=g.cc({factory:function(t){return new(t||e)},providers:[h.a,s.a,p.a,l.a,f.a,d.a],imports:[[i.c,a.l,c.o,u.a,o.P,r.c]]}),e}()},WH6p:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("D57K"),a=n("EePP"),r=n("QoSw"),o=n("5xGT"),c=n("h1tj"),s=function(e){function t(){var t=e.call(this)||this,n=new Image;return n.src="data:image/svg+xml;base64,"+btoa('<svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="9.5" cy="9.5" r="9" fill="#E5E5E5" stroke="white"/> <path d="M13.5823 5.49257C13.599 5.82378 11.4179 6.35456 9.25776 6.34607C7.13519 6.34183 4.98338 5.81953 5.0001 5.49257C5.02099 5.12314 7.81625 5 9.29118 5C10.7536 5 13.5614 5.12314 13.5823 5.49257Z" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 11.017C12.6883 11.3737 11.1883 11.845 9.28297 11.845C7.38604 11.845 5.89439 11.3737 5.00024 11.017" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 8.3121C12.6883 8.66879 11.1883 9.14013 9.28297 9.14013C7.38604 9.14013 5.89439 8.66879 5.00024 8.3121" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 5.49257V13.7473C12.6883 14.104 11.1883 14.5754 9.28297 14.5754C7.38604 14.5754 5.89439 14.104 5.00024 13.7473V5.49257" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> </svg>'),t.icon=new c.Bitmap(n),t.icon.regX=9.5,t.icon.regY=9.5,t.addChild(t.icon),t}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.update=function(e){this.name=e.id;var t=o.lb.onRect({x:{type:"fixed-end",value:10},y:{type:"fixed-end",value:10}},e.defaultBounds,e.transform);this.icon.x=t.x,this.icon.y=t.y,this.icon.rotation=e.transform.angle||0},t}(c.Container),l=n("Wpmq"),u=n("wx9+"),d=n("ZTXN"),p=n("KTx3"),h=n("g6G6"),f=n("P4Xx"),g=n("TLy2"),m=n("YtkY"),b=n("BwBJ"),v=n("J+dc"),O=n("8j5Y"),y=n("nsO7"),C=n("flPR"),x=n("0jHB"),S=n("EM62"),P=function(e){function t(t,n,i,a,r){var o=e.call(this,a)||this;return o.viewport=t,o.vtod=n,o.ll=i,o.state=a,o.defLocator=r,o.rolloutDelaytime=100,o._indicators={},o.subs=[],o.indicatorSubs={},o.addSource=new d.a,o.removeSource=new d.a,o.changeSource=new d.a,o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(y.values)(this._indicators)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(g.a)((function(){return e.removeIndicators(),e.init()})));this.subs.push(t.subscribe(),this.handleVisibility().subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.subscribeToMouseEnter=function(e){var t=this;return Object(p.a)(e.icon,"rollover").pipe(Object(m.a)((function(n){t.state.set("ShapeDataViewer",{shapeId:e.name,open:!0,src:"icon"})})))},t.prototype.subscribeToMouseLeave=function(e){var t=this;return Object(p.a)(e.icon,"rollout").pipe(Object(b.a)(this.rolloutDelaytime),Object(m.a)((function(e){var n=t.state.get("ShapeDataViewer");n.open&&"icon"===n.src&&t.state.set("ShapeDataViewer",{open:!1,src:"icon"})})))},t.prototype.removeIndicators=function(){var e=this;Object.keys(this._indicators).forEach((function(t){return e.removeIndicator(t)})),this._indicators={}},t.prototype.init=function(){var e=this;return Object(h.a)(this.ll.forCurrentObserver(!0).pipe(Object(g.a)((function(e){return e.getDiagramModel()})),Object(g.a)((function(t){return e.manageIndicators(t)}))),this.viewport.getShapeModels().pipe(Object(g.a)((function(t){return e.updateIndicators(t)}))))},t.prototype.manageIndicators=function(e){var t=this;return this.viewport.getShapeModels().pipe(Object(v.a)(1),Object(O.a)((function(e){var n=Object(y.values)(e);if(n.length>0){var i=n.map((function(e){return t.defLocator.getDefinition(e.defId,e.version)}));Object(f.a)(i).subscribe((function(e){var i=n.filter((function(n,i){return t.shouldShowIndicator(n,e[i])})).map((function(e){return e.id}));t.manageIndicatorsRemove(i),t.manageIndicatorsAdd(i)}))}else t.manageIndicatorsRemove([]),t.manageIndicatorsAdd([])})))},t.prototype.manageIndicatorsAdd=function(e){var t=this;e.forEach((function(e){t._indicators[e]||(t._indicators[e]=new s,t.subs[e]=Object(h.a)(t.subscribeToMouseEnter(t._indicators[e]),t.subscribeToMouseLeave(t._indicators[e])).subscribe(),t.addSource.next(t._indicators[e]))}))},t.prototype.manageIndicatorsRemove=function(e){var t=this;Object.keys(this._indicators).forEach((function(n){e.includes(n)||(t.subs[n].unsubscribe(),delete t.subs[n],t.removeIndicator(n))}))},t.prototype.updateIndicators=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(g.a)((function(e){return e.getDiagramOnce()})),Object(O.a)((function(n){Object.keys(t._indicators).forEach((function(n){var i=e[n];if(i){var a=t._indicators[n];a.update(i),t.changeSource.next(a)}}))})))},t.prototype.handleVisibility=function(){var e=this;return Object(h.a)(this.duringInteractions(!0,!1)).pipe(Object(O.a)((function(t){e.indicators.forEach((function(t){t.visible=!0,e.changeSource.next(t)}))})))},t.prototype.removeIndicator=function(e){var t=this._indicators[e];this.removeSource.next(t),delete this._indicators[e]},t.prototype.shouldShowIndicator=function(e,t){return!!e.dataItems&&(!(!e.dataItems[a.a]||this.isContentEmpty(e.dataItems[a.a].value))&&(!(!(t&&e.dataItems[a.a]&&t.data&&t.data[a.a])||Object(y.isEqual)(t.data[a.a].value.ops,e.dataItems[a.a].value.ops))||(!!e.dataSetId||(e.dataItems.description&&this.isContentEmpty(e.dataItems.description.value)?!(t.data&&t.data[a.a]&&Object(y.isEqual)(t.data[a.a].value.ops,e.dataItems[a.a].value.ops)):t&&t.data&&t.data.description?!Object(y.isEqual)(t.data.description.value.ops,e.dataItems.description.value.ops):!!e.dataItems[a.a]))))},t.prototype.isContentEmpty=function(e){return!e.ops||1===e.ops.length&&"\n"===e.ops[0].insert},t.\u0275fac=function(e){return new(e||t)(S.pc(u.a),S.pc(l.a),S.pc(r.a),S.pc(o.Gb),S.pc(x.a))},t.\u0275prov=S.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(C.a)(),Object(i.g)("design:paramtypes",[u.a,l.a,r.a,o.Gb,x.a])],t)}(C.b)},YJWy:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var i=n("D57K"),a=n("5xGT"),r=n("d9KY"),o=n("QoSw"),c=n("nsO7"),s=n("8j5Y"),l=n("7SLS"),u=n("EM62"),d=function(e){function t(t){var n=e.call(this)||this;return n.ll=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dataDefinition",{get:function(){return{type:!1}},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this;return this.ll.forCurrent(this.eventData.scenario===a.x.PREVIEW).getDiagramOnce().pipe(Object(s.a)((function(t){if(e.data&&e.data.type){var n=[];Object(c.map)(t.shapes,(function(t,i){t instanceof e.data.type&&n.push(i)})),e.resultData={shapeIds:n}}else e.resultData={shapeIds:Object(c.keys)(t.shapes)}})),Object(l.a)(!0))},t.\u0275fac=function(e){return new(e||t)(u.pc(o.a))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[o.a])],t)}(a.a);Object.defineProperty(d,"name",{value:"GetShapeIds"});var p=n("rW6H"),h=n("kXwT"),f=n("dKf+"),g=n("W0Mc"),m=function(e){function t(t,n,i){var a=e.call(this)||this;return a.ds=t,a.reconnectSvc=n,a.stateSvc=i,a}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{changes:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.resultData={},this.ds.getChangeModel(this.resourceId,this.eventData.eventId,this.eventData.scenario).pipe(Object(s.a)((function(t){var n,a,r=function(n){var i=e.data.changes[n];e.reconnectShape(n,i,t).forEach((function(t){return e.replaceOrPush(i,t)})),e.resultData[n]=i};try{for(var o=Object(i.k)(Object.keys(e.data.changes)),c=o.next();!c.done;c=o.next()){r(c.value)}}catch(s){n={error:s}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}})))},t.prototype.execute=function(){return!0},t.prototype.reconnectShape=function(e,t,n){if(!n.shapes[e])return[];var i=this.getEndpoints(e,t,n),r=this.stateSvc.get("CustomGluePoint");return this.eventData.scenario===a.x.EXECUTE&&r&&r.shapeId&&i.forEach((function(e){1!==i.length&&e.shapeId!==r.shapeId||(e.shapeId=r.shapeId,e.gluepointId=r.gluepoint.id,e.gluepointLocked=!0)})),this.reconnectSvc.reconnect(e,n,i)},t.prototype.getEndpoints=function(e,t,n){var i=n.shapes[e].getPoints(),a=[i[0].id,Object(c.last)(i).id];return t.filter((function(e){return a.indexOf(e.id)>=0}))},t.prototype.replaceOrPush=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n?e.splice(n,1,t):e.push(t)},t.\u0275fac=function(e){return new(e||t)(u.pc(f.a),u.pc(g.a),u.pc(a.Gb))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[f.a,g.a,a.Gb])],t)}(a.a);Object.defineProperty(m,"name",{value:"ReconnectConnector"});var b=n("7/v2"),v=n("X0jn"),O=n("5vYS"),y=n("d0OC"),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this,t=this.getCurrentEntities(this.data.shapeIds),n=t.map((function(e){return e.bounds})),i=this.alignShapes(n,this.data.isVertical,this.data.alignment);t.forEach((function(t,a){var r=i[a];if("shape"===t.type)e.transformShape(t.shapeId,r);else if("group"===t.type){var o=n[a],c={x:o.x-r.x,y:o.y-r.y};t.shapeIds.forEach((function(n,i){var a=t.shapeBounds[i];r.x=a.x-c.x,r.y=a.y-c.y,e.transformShape(n,r)}))}}))},t.prototype.transformShape=function(e,t){var n=this.changeModel.shapes[e];if(n.type===v.p.Connector)this.setConnectorPosition(n,t);else{var i=n.transform,a=t.x-(n.bounds.x-i.x),r=t.y-(n.bounds.y-i.y);this.setShapePosition(n,{x:a,y:r})}},t.prototype.getCurrentEntities=function(e){var t=this,n=[],a=[],r=[];return e.forEach((function(e){if(t.changeModel.isShapeInGroup([e])){if(!r.includes(e)){var i=t.changeModel.getAllShapesInGroupHierarchy([e]);r=r.concat(i);var o=t.getShapeBounds(i),c=t.getGroupedBounds(o);a.push({type:"group",shapeIds:i,shapeBounds:o,bounds:c})}}else n.push({type:"shape",shapeId:e,bounds:t.getShapeBounds([e])[0]})})),Object(i.j)(n,a)},t.prototype.getGroupedBounds=function(e){var t=a.sb.from(e[0]);return e.forEach((function(e,n){if(n>0){var i=a.sb.from(e);t.absorb(i)}})),t},t.prototype.getShapeBounds=function(e){var t,n,a=[];try{for(var r=Object(i.k)(e),o=r.next();!o.done;o=r.next()){var c=o.value,s=this.changeModel.shapes[c];s.type,v.p.Connector,a.push(s.bounds)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a},t.prototype.alignShapes=function(e,t,n){return t?Object(a.Mb)(e,n):Object(a.Lb)(e,n)},t.prototype.setShapePosition=function(e,t){e.x=t.x,e.y=t.y},t.prototype.setConnectorPosition=function(e,t){var n,a;if(!e.fromEndpoint.shape&&!e.toEndpoint.shape){var r=e.bounds,o=t.x-r.x,s=t.y-r.y,l=e.getPoints(),u=Object(c.cloneDeep)(l);try{for(var d=Object(i.k)(u),p=d.next();!p.done;p=d.next()){var h=p.value;h.x+=o,h.y+=s,h.c1&&(h.c1.x+=o,h.c1.y+=s),h.c2&&(h.c2.x+=o,h.c2.y+=s)}}catch(f){n={error:f}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}e.path=O.a.createPathFromPoints(u)}},t.\u0275fac=function(e){return x(e||t)},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)()],t)}(y.a),x=u.nc(C);Object.defineProperty(C,"name",{value:"AlignShapes"});var S=n("uWBd"),P=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.pathingSvc=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e,t;try{for(var n=Object(i.k)(this.data.connectorIds),a=n.next();!a.done;a=n.next()){var r=a.value,o=this.changeModel.shapes[r],s=this.pathingSvc.reverse(r,this.changeModel),l=O.a.createPathFromPoints(s);Object(c.isEqual)(o.path,l)||(o.path=l)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.\u0275fac=function(e){return new(e||t)(u.pc(f.a),u.pc(S.a))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[f.a,S.a])],t)}(y.a);Object.defineProperty(P,"name",{value:"FlipConnector"});var j=n("Cm/l"),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{shapeId:!0,vectorId:!0,points:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this.changeModel.shapes[this.data.shapeId];if(e&&!e.isLocked){var t=e.defaultBounds,n=e.transform,i=e.vectors[this.data.vectorId];i.id=this.data.vectorId,i.movement=i.movement,i.withInBounds=i.withInBounds;var a=this.data.points.map((function(a,r){a=e.diagramToShapeCordinate(a);var o=i.points[r].x.type,c=i.points[r].y.type;return{x:{type:o,value:"relative"===o?a.x/(t.width*n.scaleX):a.x},y:{type:c,value:"relative"===c?a.y/(t.height*n.scaleY):a.y}}}));i.points=a}},t.\u0275fac=function(e){return k(e||t)},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)()],t)}(y.a),k=u.nc(w);Object.defineProperty(w,"name",{value:"MoveVisualVector"});var E=n("Wpmq"),I=function(e){function t(t){var n=e.call(this)||this;return n.convert=t,n}return Object(i.e)(t,e),t.prototype.prepareData=function(){if(this.resultData={},this.data.shapes)for(var e in this.resultData.shapes={},this.data.shapes){var t=this.data.shapes[e];this.resultData.shapes[e]=this.convert.matrix(t)}if(this.data.connectors)for(var e in this.resultData.connectors={},this.data.connectors){var n=this.data.connectors[e],i=n.prev,a=n.next;this.resultData.connectors[e]={prev:this.convert.matrix(i),next:this.convert.matrix(a)}}},t.prototype.execute=function(){return!0},t.\u0275fac=function(e){return new(e||t)(u.pc(E.a))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[E.a])],t)}(a.a);Object.defineProperty(I,"name",{value:"ConvertViewportForTransform"});var T=n("9KTM"),_=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.restriction=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this,t=["ShapeBounds","GridService"];for(var n in this.data.shapes){var i=this.data.shapes[n].toTransform();i.skewX=0,i.skewY=0;var r=this.changeModel.shapes[n];if(!r||r.isLocked)return;var o=this.restriction.shapeTransform(r,i,t);r.x!==o.x&&(r.x=o.x),r.y!==o.y&&(r.y=o.y),r.transformSettings.hScale&&!this.isEqual(r.scaleX,o.scaleX)&&(r.scaleX=o.scaleX,!1!==r.autoResizeWidth&&(r.autoResizeWidth=!1),r.userSetWidth=r.bounds.width),r.transformSettings.vScale&&!this.isEqual(r.scaleY,o.scaleY)&&(r.scaleY=o.scaleY,!1!==r.autoResizeHeight&&(r.autoResizeHeight=!1),r.userSetHeight=r.bounds.height),r.transformSettings.rotate&&r.angle!==o.angle&&(r.angle=o.angle),0!==r.skewX&&(r.skewX=0),0!==r.skewY&&(r.skewY=0)}var s=function(t){var n=l.changeModel.shapes[t];if(!n)return{value:void 0};if(!l.shouldTransform(n))return"continue";var i=l.data.connectors[t],r=i.prev,o=i.next,s=a.cb.fromMatrix(o.appendMatrix(r.invert())),u=n.getPoints().map((function(t){return e.transformPoint(t,s)})),d=O.a.createPathFromPoints(u);Object(c.isEqual)(n.path,d)||(n.path=d)},l=this;for(var n in this.data.connectors){var u=s(n);if("object"==typeof u)return u.value}},t.prototype.isEqual=function(e,t){return parseFloat(e.toFixed(8))===parseFloat(t.toFixed(8))},t.prototype.shouldTransform=function(e){var t=e.getPoints(),n=t[0],i=t[t.length-1];return!!(!n.shapeId||this.data.shapes&&this.data.shapes[n.shapeId])&&!!(!i.shapeId||this.data.shapes&&this.data.shapes[i.shapeId])},t.prototype.transformPoint=function(e,t){var n=Object(c.cloneDeep)(e);return t.transformPoint(n.x,n.y,n),n.c1&&t.transformPoint(n.c1.x,n.c1.y,n.c1),n.c2&&t.transformPoint(n.c2.x,n.c2.y,n.c2),n.bumps=[],n},t.\u0275fac=function(e){return new(e||t)(u.pc(f.a),u.pc(T.a))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[f.a,T.a])],t)}(y.a);Object.defineProperty(_,"name",{value:"TransformShapes"});var M=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.state=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){this.addShapesToGroup(this.getShapeIds())},t.prototype.addShapesToGroup=function(e){var t=this;if(!this.changeModel.isShapeInGroup(e)){var n=[],i=[];e.forEach((function(e){if(t.changeModel.isShapeInGroup([e])){var a=t.changeModel.getGroupHierarchy(e);i.push(a[0])}else n.push(e)})),i=Object(c.uniq)(i);var r=a.pb.groupId();this.changeModel.groups[r]={shapes:n,groups:i}}},t.prototype.getShapeIds=function(){var e=void 0===this.data.shapeIds?[]:this.data.shapeIds;return(void 0===this.data.includeSelected||this.data.includeSelected)&&(e=e.concat(this.state.get("Selected"))),e},t.\u0275fac=function(e){return new(e||t)(u.pc(f.a),u.pc(a.Gb))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[f.a,a.Gb])],t)}(y.a);Object.defineProperty(M,"name",{value:"GroupShapes"});var D=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.state=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this.getShapeIds();if(this.changeModel.isShapeInGroup(e)){var t=this.changeModel.getGroupHierarchy(e[0])[0];delete this.changeModel.groups[t]}},t.prototype.getShapeIds=function(){var e=void 0===this.data.shapeIds?[]:this.data.shapeIds;return(void 0===this.data.includeSelected||this.data.includeSelected)&&(e=e.concat(this.state.get("Selected"))),e},t.\u0275fac=function(e){return new(e||t)(u.pc(f.a),u.pc(a.Gb))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[f.a,a.Gb])],t)}(y.a);Object.defineProperty(D,"name",{value:"UnGroupShapes"});var A=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.stateSvc=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e,t,n,r,o,c,s,l;if(this.eventData.scenario!==a.x.PREVIEW){var u={};try{for(var d=Object(i.k)(Object.keys(this.changeModel.shapes)),p=d.next();!p.done;p=d.next()){var h=p.value,f=this.changeModel.shapes[h];if(this.isConnectorModel(f))try{for(var g=(n=void 0,Object(i.k)(this.getConnectedGluepoints(f))),m=g.next();!m.done;m=g.next()){u[P=m.value]=!0}}catch(k){n={error:k}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}else try{for(var b=(o=void 0,Object(i.k)(Object.keys(f.gluepoints))),v=b.next();!v.done;v=b.next()){var O=v.value,y=f.gluepoints[O],C=f.id+"."+O;"custom"!==y.type||u[C]||(u[C]=!1)}}catch(E){o={error:E}}finally{try{v&&!v.done&&(c=b.return)&&c.call(b)}finally{if(o)throw o.error}}}}catch(I){e={error:I}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}try{for(var x=Object(i.k)(Object.keys(u)),S=x.next();!S.done;S=x.next()){var P;if(!u[P=S.value]){var j=Object(i.h)(P.split("."),2);h=j[0],O=j[1];delete(f=this.changeModel.shapes[h]).gluepoints[O]}}}catch(T){s={error:T}}finally{try{S&&!S.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}var w=this.stateSvc.get("CustomGluePoint");if(w&&w.shapeId&&w.gluepoint)(f=this.changeModel.shapes[w.shapeId]).gluepoints[w.gluepoint.id]=w.gluepoint}},t.prototype.isConnectorModel=function(e){return e.type===v.p.Connector},t.prototype.getConnectedGluepoints=function(e){var t,n,a=[],r=e.getPoints(),o=[r[0],r[r.length-1]],c=function(t){var n=s.data.changes[e.id];n&&n.find((function(e){return e.id===t.id}))||a.push(t.shapeId+"."+t.gluepointId)},s=this;try{for(var l=Object(i.k)(o),u=l.next();!u.done;u=l.next()){c(u.value)}}catch(d){t={error:d}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a},t.\u0275fac=function(e){return new(e||t)(u.pc(f.a),u.pc(a.Gb))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.s)(),Object(i.g)("design:paramtypes",[f.a,a.Gb])],t)}(y.a);Object.defineProperty(A,"name",{value:"UpdateCustomGluepoints"});var R=n("icO7"),L=n("phng"),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.registerSelectAll=function(e){e.mapSequence(t.selectAll).add(d).add(r.a)},t.registerMoveVector=function(e){e.mapSequence(t.moveVisualVector).add(h.a).add(w).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerTransformShapesAndConnectors=function(e){e.mapSequence(t.transformShapesAndConnectors).add(I).add(_).add(j.a,{transform:function(e){var t;return e.eventInfo.scenario===a.x.PREVIEW?{changes:{}}:{changes:(t={},t[e.resultData[0].id]={},t)}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerMoveConnectorEndPointOnViewport=function(e){e.mapSequence(t.moveConnectorEndPointOnViewport).add(h.a).add(A,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(m,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(p.a,{transform:function(e){return{changes:e.resultData[2]}}}).add(j.a,{transform:function(e){if(e.eventInfo.scenario===a.x.PREVIEW)return{changes:{}};var t=e.resultData[2],n={};return Object.keys(t).forEach((function(e){return n[e]={}})),{changes:n}}}).add(b.a,{transform:function(e){var t;return{changes:(t={},t[e.resultData[0].id]=null,t),updateConnections:e.eventData.updateConnections,updateDefinitions:e.eventData.updateDefinitions}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerMoveConnectorPathPointOnViewport=function(e){e.mapSequence(t.moveConnectorPathPointOnViewport).add(h.a).add(p.a,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(j.a,{transform:function(e){var t;return e.eventInfo.scenario===a.x.PREVIEW?{changes:{}}:{changes:(t={},t[e.resultData[0].id]={},t)}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerChangeConnectedGluepoint=function(e){e.mapSequence(t.changeConnectedGluepoint).add(m,{transform:function(e){var t,n=e.data[0],i={id:n.endpointId,shapeId:n.shapeId,gluepointId:n.gluepointId,gluepointLocked:!0};return{changes:(t={},t[n.connectorId]=[i],t)}}}).add(p.a,{transform:function(e){return{changes:e.resultData[0]}}}).add(j.a,{transform:function(e){if(e.eventInfo.scenario===a.x.PREVIEW)return{changes:{}};var t=e.resultData[0],n={};return Object.keys(t).forEach((function(e){return n[e]={}})),{changes:n}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerFlipConnector=function(e){e.mapSequence(t.flipConnector).add(P).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerAlignShapes=function(e){e.mapSequence(this.alignShapes).add(L.a).add(C,{transform:function(e){return{shapeIds:e.resultData[0],isVertical:e.eventData.isVertical,alignment:e.eventData.alignment}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerGroupShapes=function(e){e.mapSequence(t.groupShapes).add(L.a).add(M,{transform:function(e){return{shapeIds:e.resultData[0],includeSelected:!1}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerUnGroupShapes=function(e){e.mapSequence(t.unGroupShapes).add(L.a).add(D,{transform:function(e){return{shapeIds:e.resultData[0],includeSelected:!1}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.selectAll=new t("SelectAll"),t.moveVisualVector=new t("MoveVisualVector"),t.transformShapesAndConnectors=new t("TransformShapesAndConnectors"),t.moveConnectorEndPointOnViewport=new t("MoveConnectorEndPointOnViewport"),t.moveConnectorPathPointOnViewport=new t("MoveConnectorPathPointOnViewport"),t.changeConnectedGluepoint=new t("ChangeConnectedGluepoint"),t.flipConnector=new t("FlipConnector"),t.alignShapes=new t("AlignShapes"),t.groupShapes=new t("GroupShapes"),t.unGroupShapes=new t("UnGroupShapes"),t}(a.c)},f6YR:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n("D57K"),a=n("5xGT"),r=n("hX56"),o=n("nsO7"),c=n("ZTXN"),s=n("g6G6"),l=n("ROBh"),u=n("KTx3"),d=n("6Oco"),p=n("8j5Y"),h=n("TLy2"),f=n("YtkY"),g=n("Ohay"),m=n("5uDM"),b=n("xVbo"),v=n("O6K7"),O=n("yn08"),y=n("w1VY"),C=n("Wpmq"),x=n("QoSw"),S=n("3+4Q"),P=n("flPR"),j=n("h1tj"),w=function(e){function t(t){var n=e.call(this)||this;return n.model=t,n.prepare(),n}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.prepare=function(){var e=new j.Shape;e.graphics.clear(),e.graphics.beginFill(this.model.resolved?t.RESOLVED_ICON_COLOR:t.ICON_COLOR),e.graphics.beginStroke("#FFFFFF"),e.graphics.setStrokeStyle(2),e.graphics.drawCircle(0,0,15),e.graphics.endStroke(),e.graphics.endFill(),e.shadow=new j.Shadow("rgba(0, 0, 0, 0.25)",0,2,3),this.addChild(e);var n=new j.Bitmap('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="22.84" height="17.07"><path fill="rgb(255, 255, 255)" d="M22.84,7.46C22.84,3.34,17.73,0,11.42,0S0,3.34,0,7.46s5.11,7.46,11.42,7.46a17.57,17.57,0,0,0,3.21-.3l4.3,2.43a.17.17,0,0,0,.25-.15l0-3.95C21.42,11.59,22.84,9.63,22.84,7.46Z" /></svg>');n.scaleX=.8,n.scaleY=.8,n.x=-9,n.y=-6,this.addChild(n)},t.ICON_COLOR="#F39C12",t.RESOLVED_ICON_COLOR="#7e7e7e",t}(j.Container),k=n("4y1S"),E=n("EM62"),I=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,n)||this;return l.ll=t,l.state=n,l.datastore=i,l.commandService=a,l.diagToViewport=r,l.viewToDiagram=o,l.userLocator=s,l.addSource=new c.a,l.removeSource=new c.a,l.changeSource=new c.a,l.shapeComments={},l.diagramComments={},l}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(i.j)(Object(o.values)(this.diagramComments),Object(o.flatten)(Object(o.values)(this.shapeComments).map((function(e){return Object(o.values)(e)}))))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(p.a)((function(){e.hideCommentThreadView(),e.removeAllIndicators()})),Object(h.a)((function(){return Object(s.a)(e.listenToCreateEvents(),e.listenToSingleCommentInsertChanges(),e.listenToCommentUpdateChanges(),e.listenToOpenPanelChanges().pipe(Object(h.a)((function(t){return e.userLocator.getCommentToggleState().pipe(Object(h.a)((function(n){return t||n?Object(s.a)(e.listenToCommentInsertChanges(),e.listenToViewportChanges(),e.listenToDiagramChanges(),e.listenToResolvedCommentChanges()):(e.hideCommentThreadView(),e.removeAllIndicators())})))}))))}))).subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.removeResolvedCommentIndicators=function(){var e,t,n,a,r,o;try{for(var c=Object(i.k)(Object.keys(this.diagramComments)),s=c.next();!s.done;s=c.next()){var l=s.value;!(g=this.diagramComments[l]).model.parentId&&g.model.resolved&&(this.removeSource.next(g),delete this.diagramComments[l])}}catch(m){e={error:m}}finally{try{s&&!s.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}try{for(var u=Object(i.k)(Object.keys(this.shapeComments)),d=u.next();!d.done;d=u.next()){var p=d.value;try{for(var h=(r=void 0,Object(i.k)(Object.keys(this.shapeComments[p]))),f=h.next();!f.done;f=h.next()){var g;l=f.value;!(g=this.shapeComments[p][l]).model.parentId&&g.model.resolved&&(this.removeSource.next(g),delete this.shapeComments[p][l])}}catch(b){r={error:b}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}}catch(v){n={error:v}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}},t.prototype.listenToOpenPanelChanges=function(){return this.state.changes(n.SIDEBAR_STATE_KEY).pipe(Object(f.a)((function(e){return e===n.SIDEBAR_STATE_VAL})),Object(g.a)())},t.prototype.listenToCommentInsertChanges=function(){var e=this,t=this.state.get("CurrentDiagram");return Object(s.a)(this.datastore.findLatest(S.a,{diagramId:t}).pipe(Object(f.a)((function(e){return{type:"insert",docs:e}}))),this.datastore.watch(S.a,{diagramId:t}).pipe(Object(m.a)((function(e){return e.docs?a.I.build({docs:S.a},e):Object(l.a)(e)})))).pipe(Object(b.a)((function(e){return"insert"===e.type||"remove"===e.type})),Object(p.a)((function(t){"insert"===t.type?t.docs.filter((function(e){return!e.parentId&&!e.resolved})).forEach((function(t){return e.createCommentIndicator(t)})):"remove"===t.type&&t.docs.forEach((function(t){return e.removeCommentIndicator(t)}))})))},t.prototype.listenToCommentUpdateChanges=function(){var e=this,t=this.state.get("CurrentDiagram");return Object(s.a)(this.datastore.findLatest(S.a,{diagramId:t}).pipe(Object(f.a)((function(e){return{type:"insert",docs:e}}))),this.datastore.watch(S.a,{diagramId:t}).pipe(Object(m.a)((function(e){return e.docs?a.I.build({docs:S.a},e):Object(l.a)(e)})))).pipe(Object(b.a)((function(e){return"update"===e.type})),Object(p.a)((function(t){t.docs.filter((function(e){return e.resolved})).forEach((function(t){e.removeCommentIndicator(t),e.singleComment&&t.id===e.singleComment.id&&(e.singleComment=null)}))})))},t.prototype.listenToViewportChanges=function(){var e=this;return Object(s.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(h.a)((function(){return e.locator.getDiagramOnce()})),Object(p.a)((function(t){return e.updateIndicatorPositions(t)})))},t.prototype.listenToDiagramChanges=function(){var e=this;return this.locator.getDiagramChanges().pipe(Object(p.a)((function(t){var n,a,r,o;if(t.split.shapes)try{for(var c=Object(i.k)(Object.keys(t.split.shapes)),s=c.next();!s.done;s=c.next()){var l=s.value;if(e.shapeComments[l])try{for(var u=(r=void 0,Object(i.k)(Object.keys(e.shapeComments[l]))),d=u.next();!d.done;d=u.next()){var p=d.value,h=e.shapeComments[l][p];e.positionShapeCommentIndicator(h,t.model.shapes[l]),e.changeSource.next(h)}}catch(f){r={error:f}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}}}catch(g){n={error:g}}finally{try{s&&!s.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}})))},t.prototype.listenToCreateEvents=function(){var e=this;return Object(u.a)(this.indicatorLayer,v.b.CreateComment).pipe(Object(p.a)((function(t){e.showCommentThreadView(t.getShapeId(),t.getPosition()),e.switchToNormalState()})))},t.prototype.listenToResolvedCommentChanges=function(){var e=this;return this.state.changes("CommentThreadData").pipe(Object(p.a)((function(t){e.removeResolvedCommentIndicators(),t.comments&&t.comments.forEach((function(t){!t.parentId&&t.resolved&&e.createCommentIndicator(t)}))})))},t.prototype.removeAllIndicators=function(){var e,t;try{for(var n=Object(i.k)(this.indicators),a=n.next();!a.done;a=n.next()){var r=a.value;this.removeSource.next(r),r.destroy()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.shapeComments={},this.diagramComments={},Object(d.b)()},t.prototype.updateIndicatorPositions=function(e){var t,n,a,r,o,c;try{for(var s=Object(i.k)(Object.keys(this.diagramComments)),l=s.next();!l.done;l=s.next()){var u=l.value,d=this.diagramComments[u];this.positionDiagramCommentIndicator(d),this.changeSource.next(d)}}catch(b){t={error:b}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}try{for(var p=Object(i.k)(Object.keys(this.shapeComments)),h=p.next();!h.done;h=p.next()){var f=h.value;try{for(var g=(o=void 0,Object(i.k)(Object.keys(this.shapeComments[f]))),m=g.next();!m.done;m=g.next()){u=m.value,d=this.shapeComments[f][u];this.positionShapeCommentIndicator(d,e.shapes[f]),this.changeSource.next(d)}}catch(v){o={error:v}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}}}catch(O){a={error:O}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(a)throw a.error}}},t.prototype.listenToSingleCommentInsertChanges=function(){var e=this;return this.state.changes("CommentThreadData").pipe(Object(h.a)((function(t){return e.listenToOpenPanelChanges().pipe(Object(b.a)((function(e){return!e})),Object(h.a)((function(){return t&&t.visible&&t.threadId&&t.comments.length?(e.createSingleCommentIndicator(t.comments[0]),Object(d.b)()):t&&!t.visible?e.userLocator.getCommentToggleState().pipe(Object(g.a)(),Object(f.a)((function(t){!t&&e.singleComment&&e.removeSingleCommentIndicator()}))):Object(d.b)()})))})))},t.prototype.createCommentIndicator=function(e){e.shapeId?this.createShapeCommentIndicator(e):this.createDiagramCommentIndicator(e)},t.prototype.createSingleCommentIndicator=function(e){this.singleComment=e,this.createCommentIndicator(e)},t.prototype.createDiagramCommentIndicator=function(e){if(e.locOnDiagram&&(!this.diagramComments[e.id]||this.diagramComments[e.id].model.resolved!==e.resolved)){var t=new w(e);this.positionDiagramCommentIndicator(t),this.setupCommentInteractions(t),this.diagramComments[e.id]=t,this.addSource.next(t)}},t.prototype.positionDiagramCommentIndicator=function(e){e.x=this.diagToViewport.x(e.model.locOnDiagram.x),e.y=this.diagToViewport.y(e.model.locOnDiagram.y)},t.prototype.createShapeCommentIndicator=function(e){var t=this;this.locator.getShapeOnce(e.shapeId).subscribe((function(n){if(t.shapeComments[e.shapeId]||(t.shapeComments[e.shapeId]={}),!t.shapeComments[e.shapeId][e.id]||t.shapeComments[e.shapeId][e.id].model.resolved!==e.resolved){var i=new w(e);t.positionShapeCommentIndicator(i,n),t.setupCommentInteractions(i),t.shapeComments[e.shapeId][e.id]=i,t.addSource.next(i)}}))},t.prototype.positionShapeCommentIndicator=function(e,t){if(!t)return this.positionDiagramCommentIndicator(e);var n=a.lb.onRect(e.model.locOnShape,t.defaultBounds,t.transform);e.x=this.diagToViewport.x(n.x),e.y=this.diagToViewport.y(n.y)},t.prototype.removeCommentIndicator=function(e){var t=this.indicators.find((function(t){return t.model.id===e.id}));this.removeSource.next(t),this.hideCommentThreadView()},t.prototype.removeSingleCommentIndicator=function(){var e,t,n=this,a=this.singleComment.id,r=this.indicators.find((function(e){return e.model.id===n.singleComment.id}));if(this.removeSource.next(r),this.singleComment=null,this.diagramComments[a])delete this.diagramComments[a];else try{for(var o=Object(i.k)(Object.keys(this.shapeComments)),c=o.next();!c.done;c=o.next()){var s=c.value;this.shapeComments[s][a]&&delete this.shapeComments[s][a]}}catch(l){e={error:l}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.setupCommentInteractions=function(e){var t=this;this.subs.push(Object(u.a)(e,"click").subscribe((function(){a.Ib.track("right.comment.show",{value1Type:"trigger",value1:"canvas"});var n=e.model,i={visible:!0,threadId:n.id,comments:[n]};t.state.set("CommentThreadData",i)})))},t.prototype.showCommentThreadView=function(e,t){var n={visible:!0,shapeId:e,position:{x:this.viewToDiagram.x(t.x),y:this.viewToDiagram.y(t.y)}};this.state.set("CommentThreadData",n)},t.prototype.switchToNormalState=function(){this.state.set("MouseControlState",O.b.Normal)},t.prototype.hideCommentThreadView=function(){this.state.set("CommentThreadData",{})},t.SIDEBAR_STATE_KEY="RightSidebarPanel",t.SIDEBAR_STATE_VAL="diagramcomments",t.\u0275fac=function(e){return new(e||t)(E.pc(x.a),E.pc(a.Gb),E.pc(r.b),E.pc(a.y),E.pc(y.a),E.pc(C.a),E.pc(k.x))},t.\u0275prov=E.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(P.a)(),Object(i.g)("design:paramtypes",[x.a,a.Gb,r.b,a.y,y.a,C.a,k.x])],t)}(P.b)},foQ2:function(e,t,n){"use strict";n.d(t,"b",(function(){return Ne})),n.d(t,"c",(function(){return Ue})),n.d(t,"a",(function(){return Ye}));var i=n("D57K"),a=n("C5+t"),r=n("5xGT"),o=n("NNJu"),c=n("X0jn"),s=n("Jzy8"),l=n("xnGY"),u=n("4y1S"),d=n("XWWj"),p=n("nsO7"),h=n("C05f"),f=n("ZTXN"),g=n("ROBh"),m=n("g6G6"),b=n("6Oco"),v=n("8j5Y"),O=n("J+dc"),y=n("TLy2"),C=n("Ohay"),x=n("TaSY"),S=n("xVbo"),P=n("YtkY"),j=n("0Woy"),w=n("jIqt"),k=n("mWib"),E=n("QoSw"),I=n("B/3P"),T=n("c7W3"),_=n("Q4Fx"),M=n("S0Xf"),D=n("EM62"),A=n("sEIs"),R=n("s2Ay"),L=n("2kYt"),B=n("K0+f"),N=function(e){return{value1Type:"projectId",value1:e}},U=function(e){return{event:"left.folder.folder.click",data:e}},F=function(){function e(e){this.state=e}return e.prototype.setAsSelected=function(){this.state.set("FolderPanelSelectedProject",this.id)},e.\u0275fac=function(t){return new(t||e)(D.fc(r.Gb))},e.\u0275cmp=D.Zb({type:e,selectors:[["project-list-item"]],inputs:{name:"name",id:"id"},decls:6,vars:6,consts:[[1,"list-item","sidebar-item",3,"trackAction","click"],[1,"sidebar-icon-container"],[1,"nu-icon","nu-ic-folder-thin","orange"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-folder-thin"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.sc("click",(function(){return t.setAsSelected()})),D.lc(1,"div",1),D.vc(),D.lc(2,"svg",2),D.gc(3,"use",3),D.kc(),D.kc(),D.uc(),D.lc(4,"a"),D.ad(5),D.kc(),D.kc()),2&e&&(D.Bc("trackAction",D.Fc(4,U,D.Fc(2,N,t.id))),D.Sb(5),D.bd(t.name))},directives:[B.a],styles:[".list-item[_ngcontent-%COMP%]{display:flex;padding:5px;align-items:center;width:202px}.list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}"],changeDetection:0}),e}();function Y(e,t){if(1&e&&(D.gc(0,"project-list-item",2),D.xc(1,"translate")),2&e){var n=t.$implicit;D.Bc("id",null==n?null:n.id)("name",D.yc(1,2,null==n?null:n.name))}}var G=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["project-list"]],inputs:{projectList:"projectList"},decls:3,vars:3,consts:[[1,"project-list-container"],[3,"id","name",4,"ngFor","ngForOf"],[3,"id","name"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.Yc(1,Y,2,4,"project-list-item",1),D.xc(2,"async"),D.kc()),2&e&&(D.Sb(1),D.Bc("ngForOf",D.yc(2,1,t.projectList)))},directives:[L.s,F],pipes:[L.b,R.d],styles:[".project-list-container[_ngcontent-%COMP%]{height:-webkit-min-content;height:-moz-min-content;height:min-content}.project-list-container[_ngcontent-%COMP%]  .ps-content{padding:0}"],changeDetection:0}),e}(),H=function(){function e(e){this.translate=e}return e.\u0275fac=function(t){return new(t||e)(D.fc(R.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["project-bar-item"]],inputs:{isUserPaused:"isUserPaused",projectList:"projectList"},decls:2,vars:1,consts:[[3,"projectList"]],template:function(e,t){1&e&&(D.jc(0),D.gc(1,"project-list",0),D.ic()),2&e&&(D.Sb(1),D.Bc("projectList",t.projectList))},directives:[G],styles:[".project-bar-item.selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}"],changeDetection:0}),e}(),V=n("jHi0"),W=["componentContainer"],X=function(e,t){return{expanded:e,collapsed:t}},K=function(e,t){return{"light-nv-blue":e,"medium-grey":t}},z=function(){return{event:"left.folder.createFolder.click"}},q=function(e){function t(t,n,i,a,r,o,c,s){var l=e.call(this,t,n,i,a)||this;return l.componentFactoryResolver=t,l.injector=n,l.cdr=i,l.translate=a,l.commandService=r,l.planPermManager=o,l.state=c,l.userLocator=s,l.removable=!1,l.hideHeaderButton=!1,l.shareWithTeam=!1,l.isUserPaused=new h.a(!1),l.subs=[],l.toggleChild=new D.t,l.removeChild=new D.t,l.subs.push(l.checkUserPauseStatus().subscribe()),l}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.menuItem.id},enumerable:!1,configurable:!0}),t.prototype.createProject=function(){var e=this;if(!this.planPermManager.check([c.m.PROJECT_CREATE]))throw new u.l("Project create permission is denied",I.a[c.m.PROJECT_CREATE]);var t=r.pb.projectId();return(this.shareWithTeam?this.commandService.dispatch(s.t.createProjectAndShareWithTeam,{id:t}):this.commandService.dispatch(s.t.createProject,{id:t})).subscribe({complete:function(){e.state.set("FolderPanelSelectedProject",t)}})},t.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(C.a)(),Object(v.a)((function(t){return e.isUserPaused.next(t)})))},t.prototype.ngOnDestroy=function(){for(this.toggleChild=null,this.removeChild=null,this.menuItem=null,this._parent=null,this._isOpen=!1;this.subs.length;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(D.fc(D.m),D.fc(D.C),D.fc(D.j),D.fc(R.e),D.fc(r.y),D.fc(u.o),D.fc(r.Gb),D.fc(u.x))},t.\u0275cmp=D.Zb({type:t,selectors:[["project-collapsible-menu-item"]],viewQuery:function(e,t){var n;(1&e&&D.Tc(W,!0,D.hb),2&e)&&(D.Jc(n=D.tc())&&(t.componentContainer=n.first))},inputs:{removable:"removable",hideHeaderButton:"hideHeaderButton",shareWithTeam:"shareWithTeam",id:"id"},outputs:{toggleChild:"toggleChild",removeChild:"removeChild"},features:[D.Pb],decls:20,vars:20,consts:[[1,"col-menu-item-container",3,"ngClass"],[1,"col-menu-item-heading","fx-no-selection"],[1,"col-menu-item-heading-inner",3,"click"],[1,"col-menu-item-icon"],[1,"nu-icon","nu-ic-close-thin",3,"ngClass"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"],[1,"col-menu-item-heading-title","fx-ellipsis"],[1,"col-menu-item-icon-right",3,"hidden"],["data-testid","add-project-button","tooltip","","placement","bottom",1,"fx-button","fx-icon",3,"trackAction","disabled","click"],[1,"nu-icon","nu-ic-plus","nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],[1,"tooltip-content"],[1,"col-menu-item-content"],[1,"fx-invisible-item"],["componentContainer",""]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"div",1),D.lc(2,"div",2),D.sc("click",(function(){return t.toggle()})),D.lc(3,"div",3),D.vc(),D.lc(4,"svg",4),D.gc(5,"use",5),D.kc(),D.kc(),D.uc(),D.lc(6,"div",6),D.ad(7),D.xc(8,"async"),D.kc(),D.kc(),D.lc(9,"div",7),D.lc(10,"button",8),D.sc("click",(function(){return t.createProject()})),D.xc(11,"async"),D.vc(),D.lc(12,"svg",9),D.gc(13,"use",10),D.kc(),D.uc(),D.lc(14,"div",11),D.ad(15),D.xc(16,"async"),D.kc(),D.kc(),D.kc(),D.kc(),D.lc(17,"div",12),D.gc(18,"div",13,14),D.kc(),D.kc()),2&e&&(D.Bc("ngClass",D.Gc(13,X,t.active,!t.active)),D.Sb(4),D.Bc("ngClass",D.Gc(16,K,t.active,!t.active)),D.Sb(3),D.bd(D.yc(8,7,t.translate.get(t.title))),D.Sb(2),D.Bc("hidden",t.hideHeaderButton),D.Sb(1),D.Bc("trackAction",D.Ec(19,z))("disabled",D.yc(11,9,t.isUserPaused)),D.Sb(5),D.cd(" ",D.yc(16,11,t.translate.get("TOOLTIPS.NEW_FOLDER"))," "))},directives:[L.q,V.a,B.a],pipes:[L.b],styles:[".col-menu-item-icon[_ngcontent-%COMP%]{width:30px;height:30px;transition:transform .3s ease}.col-menu-item-heading[_ngcontent-%COMP%]{height:30px;line-height:30px;cursor:pointer;color:#7e7e7e}.col-menu-item-heading[_ngcontent-%COMP%]:hover{color:#ffc648}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-heading[_ngcontent-%COMP%]{color:#04263d}.col-menu-item-heading-inner[_ngcontent-%COMP%]{width:calc(100% - 35px);display:flex;flex-direction:row;float:left}.col-menu-item-heading-title[_ngcontent-%COMP%]{flex:1}.col-menu-item-icon-right[_ngcontent-%COMP%]{width:30px;height:30px;float:right;margin-right:4px}.col-menu-item-container[_ngcontent-%COMP%]{overflow:hidden;min-height:30px}.col-menu-item-container.expanded[_ngcontent-%COMP%]{margin-bottom:30px}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-content[_ngcontent-%COMP%]{height:auto}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.col-menu-item-content[_ngcontent-%COMP%]{height:0;margin-top:10px;padding-left:5px}"],changeDetection:0}),t}(o.a),J=n("crdX"),Z=n("Ownj"),Q=function(){return{event:"left.folder.recent.click"}},$=function(){function e(e,t,n,i,a,r){var o=this;this.commandService=e,this.planPermManager=t,this.state=n,this.translate=i,this.userLocator=a,this.projectsLocator=r,this.isUserPaused=new h.a(!1),this.subs=[],this.projectList=r.getProjects(),this.isDemoUser=new h.a(!1),this.subs.push(t.isDemoUser().subscribe((function(e){return o.isDemoUser.next(e)})))}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(a.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.checkUserPauseStatus().subscribe(),this.loadFolderCategories().subscribe())},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(C.a)(),Object(v.a)((function(t){t?e.isUserPaused.next(!0):e.isUserPaused.next(!1)})))},e.prototype.showRecentDiagrams=function(){this.state.set("FolderPanelSelectedTab","recent")},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.checkTeamShared=function(e,t){return!(!e.team||!t.collabs)&&(t.privacy&&(t.privacy.level===u.p.ANYONE_IN_TEAM||t.privacy.level===u.p.ANYONE_IN_TEAM_WITH_LINK)&&e.team.isInTeam(t.owner.id))},e.prototype.getYourFolders=function(e){var t=this;return this.projectsLocator.getProjects().pipe(Object(P.a)((function(n){return n.filter((function(n){return!!n.isHomeProject||!t.checkTeamShared(e,n)&&!(!n.owner||n.owner.id!==e.id)}))})))},e.prototype.getTeamFolders=function(e){var t=this;return this.projectsLocator.getProjects().pipe(Object(P.a)((function(n){return n.filter((function(n){return t.checkTeamShared(e,n)}))})))},e.prototype.getSharedFolders=function(e){var t=this;return this.projectsLocator.getProjects().pipe(Object(P.a)((function(n){return n.filter((function(n){return!n.isHomeProject&&(!t.checkTeamShared(e,n)&&(!n.owner||n.owner.id!==e.id))}))})),Object(y.a)((function(e){var t=new s.v(s.B.SHARED_HOME,"LABELS.SHARED_HOME");return e.push(t),Object(g.a)(e)})))},e.prototype.loadFolderCategories=function(){var e=this;return this.getFolderCategories().pipe(Object(v.a)((function(t){t.forEach((function(t){e.collapsibleMenu.has(t.id)||e.subs.push(e.collapsibleMenu.add(q,H,t,!1,{shareWithTeam:t.shareWithTeam,hideHeaderButton:t.hideHeaderButton}).subscribe())}))})))},e.prototype.getFolderCategories=function(){var e=this;return this.userLocator.getUserData().pipe(Object(S.a)((function(e){return!!e})),Object(P.a)((function(t){var n={id:"your-folders",title:"FOLDER_PANEL.MY_WORKSPACES",projectList:e.getYourFolders(t),shareWithTeam:!1,hideHeaderButton:!1},i={id:"shared-folders",title:"FOLDER_PANEL.SHARED_WITH_ME",projectList:e.getSharedFolders(t),shareWithTeam:!1,hideHeaderButton:!0},a=[];return a.push(n),t.team&&t.team.teamSize>0&&a.push({id:"team-folder",title:t.team.organizationName||"FOLDER_PANEL.SHARED_WITH_TEAM",projectList:e.getTeamFolders(t),shareWithTeam:!0,hideHeaderButton:!0}),a.push(i),a})))},e.\u0275fac=function(t){return new(t||e)(D.fc(r.y),D.fc(u.o),D.fc(r.Gb),D.fc(R.e),D.fc(u.x),D.fc(s.u))},e.\u0275cmp=D.Zb({type:e,selectors:[["project-bar"]],viewQuery:function(e,t){var n;(1&e&&D.Tc(r.q,!0),2&e)&&(D.Jc(n=D.tc())&&(t.collapsibleMenu=n.first))},decls:12,vars:6,consts:[[1,"project-bar-container"],["translate","",1,"fx-margin-bottom-15","panel-main-header"],[1,"list-item","project-bar-item",3,"trackAction","click"],[1,"project-bar-icon-container"],[1,"nu-icon","nu-ic-time-thin","purple"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-time-thin"],["translate",""],[1,"col-menu-scrollbar"],[1,"project-collapsible-menu"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.xc(1,"async"),D.lc(2,"h2",1),D.ad(3,"FOLDER_PANEL.FOLDERS"),D.kc(),D.lc(4,"div",2),D.sc("click",(function(){return t.showRecentDiagrams()})),D.lc(5,"div",3),D.vc(),D.lc(6,"svg",4),D.gc(7,"use",5),D.kc(),D.kc(),D.uc(),D.lc(8,"a",6),D.ad(9,"FOLDER_PANEL.RECENT"),D.kc(),D.kc(),D.lc(10,"perfect-scrollbar",7),D.gc(11,"collapsible-menu",8),D.kc(),D.kc()),2&e&&(D.Xb("not-demo",!D.yc(1,3,t.isDemoUser)),D.Sb(4),D.Bc("trackAction",D.Ec(5,Q)))},directives:[R.a,B.a,J.b,Z.a],pipes:[L.b],styles:[".project-bar-item.selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}.project-bar-container[_ngcontent-%COMP%]{height:100vh;padding:30px 10px 80px}.project-collapsible-menu[_ngcontent-%COMP%]{padding-left:0}.list-item[_ngcontent-%COMP%]{display:flex;padding:5px;align-items:center}.list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.project-bar-section-header[_ngcontent-%COMP%]{display:flex}.project-bar-section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1}.panel-main-header[_ngcontent-%COMP%]{margin-left:5px}.project-bar-section-add-project[_ngcontent-%COMP%]{padding:0;margin-right:-5px}"],changeDetection:0}),e}(),ee=n("Wrqg"),te=n("HM3f"),ne=n("YsaH"),ie=n("rwb9"),ae=function(){return{event:"header.right.avatar.click"}};function re(e,t){if(1&e&&(D.lc(0,"div",5),D.gc(1,"user-image",6),D.lc(2,"div",7),D.lc(3,"div",8),D.lc(4,"p",9),D.ad(5),D.kc(),D.lc(6,"p"),D.lc(7,"label",10),D.ad(8),D.kc(),D.kc(),D.lc(9,"p"),D.lc(10,"span",11),D.ad(11),D.kc(),D.kc(),D.lc(12,"p",12),D.ad(13),D.xc(14,"translate"),D.kc(),D.kc(),D.kc(),D.kc()),2&e){var n=D.wc().$implicit;D.Sb(1),D.Bc("hasImage",n.collab.hasImage)("imagePath",n.collab.image)("userColor",n.collab.displayColor)("userInitials",n.collab.initial)("userRegistered",n.collab.isRegistered)("trackAction",D.Ec(13,ae))("userOnlineStatus",n.collab.online),D.Sb(4),D.bd(n.collab.fullName),D.Sb(3),D.bd(n.collab.roleTitle),D.Sb(3),D.bd(n.collab.email),D.Sb(2),D.bd(D.yc(14,11,n.collab.lastSeenMoment))}}function oe(e,t){if(1&e&&(D.lc(0,"div",13),D.lc(1,"div",14),D.lc(2,"span"),D.ad(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.wc().$implicit;D.Sb(3),D.cd("+",n.remainingCount,"")}}var ce=function(e,t){return{right:e,"z-index":t}},se=function(e,t){return{active:e,inactive:t}};function le(e,t){if(1&e&&(D.lc(0,"div",2),D.Yc(1,re,15,14,"div",3),D.Yc(2,oe,4,1,"div",4),D.kc()),2&e){var n=t.$implicit;D.Bc("ngStyle",D.Gc(4,ce,n.position+"px",n.index))("ngClass",D.Gc(7,se,n.collab&&n.collab.online,n.collab&&!n.collab.online)),D.Sb(1),D.Bc("ngIf",!!n.collab),D.Sb(1),D.Bc("ngIf",!n.collab)}}var ue=function(e){function t(t,n,a){var r=e.call(this)||this;return r.collabLocator=t,r.state=a,r.limitCount=0,r.collabs=n.getUserData().pipe(Object(S.a)((function(e){return!!e})),Object(y.a)((function(){return Object(te.b)([a.changes("FolderPanelSelectedProject").pipe(Object(y.a)((function(e){return e===s.B.HOME||e===s.B.SHARED_HOME?Object(g.a)([]):t.getCollabs(e).pipe(Object(S.a)((function(e){return!!e})),Object(P.a)((function(e){return e.filter((function(e){return e.id!==r.state.get("CurrentUser")}))})))}))),r.collabHover]).pipe(Object(P.a)((function(e){var t=Object(i.h)(e,2),n=t[0],a=t[1];return r.getCollabViews(n,a)})))}))),r}return Object(i.e)(t,e),t.\u0275fac=function(e){return new(e||t)(D.fc(s.r),D.fc(u.x),D.fc(r.Gb))},t.\u0275cmp=D.Zb({type:t,selectors:[["project-user-strip"]],inputs:{limitCount:"limitCount"},features:[D.Pb],decls:3,vars:4,consts:[[1,"user-strip-container"],["class","user-strip-img-wrapper",3,"ngStyle","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"user-strip-img-wrapper",3,"ngStyle","ngClass"],["tooltip","","placement","bottom","style","display: inline-block;",4,"ngIf"],["style","display: inline-block;",4,"ngIf"],["tooltip","","placement","bottom",2,"display","inline-block"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","trackAction","userOnlineStatus"],[1,"tooltip-content"],[1,"user-info-bubble"],[1,"nu-text-bold"],["translate",""],[1,"white"],[1,"nu-text-small"],[2,"display","inline-block"],[1,"user-count-inner","fx-round"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.Yc(1,le,3,10,"div",1),D.xc(2,"async"),D.kc()),2&e&&(D.Sb(1),D.Bc("ngForOf",D.yc(2,2,t.collabs))("ngForTrackBy",t.getCollabTrackingId))},directives:[L.s,L.w,L.q,L.t,V.a,ie.a,B.a,R.a],pipes:[L.b,R.d],styles:['.user-strip-container[_ngcontent-%COMP%]{height:27px;position:fixed;margin-right:5px;top:10px}.user-info-bubble[_ngcontent-%COMP%]{padding:5px}.user-count-inner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;height:30px;width:30px;position:fixed;background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#b9b9b9;position:relative;overflow:hidden;text-align:center;border:1px solid #d3d3e7}.user-count-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;height:28px}.user-count-inner[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;height:inherit;width:inherit;top:0;background:hsla(0,0%,100%,.7)}.user-strip-img-wrapper[_ngcontent-%COMP%]{max-width:100px;transition:all .2s linear;transition-delay:0s;position:absolute}.user-strip-img-wrapper[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{position:relative;transform:scale(1);transition:all .2s linear;transition-delay:.3s}.user-strip-container[_ngcontent-%COMP%]     .user-img-inner{box-shadow:2px 0 #f9f8f7}.user-strip-container[_ngcontent-%COMP%]     .user-img-container.active .user-img-inner{box-shadow:none}'],changeDetection:0}),t}(ne.a),de=n("pYIu"),pe=n("TdEb"),he=n("pVzg"),fe=n("uIWG"),ge=n("xEGh"),me=["dropdownItem"],be=["diagramArea"],ve=["contentContainer"];function Oe(e,t){1&e&&(D.lc(0,"div",35),D.lc(1,"div",36),D.lc(2,"label",37),D.ad(3,"FOLDER_PANEL.RECENT"),D.kc(),D.kc(),D.kc())}function ye(e,t){if(1&e){var n=D.mc();D.lc(0,"editable-label",43),D.sc("changedText",(function(e){D.Mc(n);var t=D.wc(2).ngIf;return D.wc(2).renameProject(null==t?null:t.id,e)})),D.kc()}if(2&e){var i=D.wc(2).ngIf;D.Cc("value",null==i?null:i.name)}}function Ce(e,t){if(1&e){var n=D.mc();D.lc(0,"editable-label",44),D.sc("changedText",(function(e){D.Mc(n);var t=D.wc(2).ngIf;return D.wc(2).renameProject(null==t?null:t.id,e)})),D.kc()}if(2&e){var i=D.wc(2).ngIf;D.Cc("value",null==i?null:i.name),D.Bc("focus",!0)("selectAll",!0)}}function xe(e,t){if(1&e&&(D.lc(0,"div"),D.Yc(1,ye,1,1,"editable-label",41),D.xc(2,"async"),D.Yc(3,Ce,1,3,"editable-label",42),D.xc(4,"async"),D.kc()),2&e){var n=D.wc(3);D.Sb(1),D.Bc("ngIf","inactive"===D.yc(2,2,n.renameMode)),D.Sb(2),D.Bc("ngIf","active"===D.yc(4,4,n.renameMode))}}function Se(e,t){1&e&&(D.lc(0,"div"),D.lc(1,"label",37),D.ad(2,"LABELS.HOME"),D.kc(),D.kc())}function Pe(e,t){1&e&&(D.lc(0,"div"),D.lc(1,"label",37),D.ad(2,"LABELS.SHARED_HOME"),D.kc(),D.kc())}function je(e,t){if(1&e){var n=D.mc();D.lc(0,"button",51),D.sc("mouseenter",(function(){return D.Mc(n),D.wc(4).showOptDropdown()})),D.vc(),D.lc(1,"svg",14),D.gc(2,"use",52),D.kc(),D.kc()}}function we(e,t){if(1&e){var n=D.mc();D.lc(0,"a",53),D.sc("click",(function(){return D.Mc(n),D.wc(4).enableRenameMode()})),D.ad(1,"PROJECT_FEATURE.RENAME"),D.kc()}}function ke(e,t){if(1&e){var n=D.mc();D.lc(0,"a",53),D.sc("click",(function(){return D.Mc(n),D.wc(4).deleteProject()})),D.xc(1,"async"),D.ad(2,"PROJECT_FEATURE.DELETE"),D.kc()}if(2&e){var i=D.wc(4);D.Xb("disabled",0===D.yc(1,2,i.appConnectionStatus))}}var Ee=function(e){return{id:e,role:"EDITOR"}},Ie=function(e){return{id:e,role:"OWNER"}};function Te(e,t){if(1&e){var n=D.mc();D.lc(0,"div",45),D.Yc(1,je,3,0,"button",46),D.lc(2,"div",47,48),D.sc("mouseleave",(function(){return D.Mc(n),D.wc(3).hideOptDropdown()})),D.Yc(4,we,2,0,"a",49),D.Yc(5,ke,3,4,"a",50),D.kc(),D.kc()}if(2&e){var i=D.wc().ngIf;D.Sb(1),D.Bc("projectRole",D.Fc(3,Ee,null==i?null:i.id)),D.Sb(3),D.Bc("projectRole",D.Fc(5,Ee,null==i?null:i.id)),D.Sb(1),D.Bc("projectRole",D.Fc(7,Ie,null==i?null:i.id))}}function _e(e,t){if(1&e&&(D.lc(0,"div",36),D.Yc(1,xe,5,6,"div",39),D.Yc(2,Se,3,0,"div",39),D.Yc(3,Pe,3,0,"div",39),D.Yc(4,Te,6,9,"div",40),D.kc()),2&e){var n=t.ngIf;D.Sb(1),D.Bc("ngIf","home"!=(null==n?null:n.id)&&"shared-home"!=(null==n?null:n.id)),D.Sb(1),D.Bc("ngIf","home"===(null==n?null:n.id)),D.Sb(1),D.Bc("ngIf","shared-home"===(null==n?null:n.id)),D.Sb(1),D.Bc("ngIf","home"!=(null==n?null:n.id)&&"shared-home"!=(null==n?null:n.id))}}function Me(e,t){if(1&e&&(D.lc(0,"div",35),D.Yc(1,_e,5,4,"div",38),D.xc(2,"async"),D.kc()),2&e){var n=D.wc();D.Sb(1),D.Bc("ngIf",D.yc(2,1,n.projectMdl))}}function De(e,t){if(1&e){var n=D.mc();D.lc(0,"button",54),D.sc("click",(function(){return D.Mc(n),D.wc().openShareWindow()})),D.xc(1,"async"),D.vc(),D.lc(2,"svg",14),D.gc(3,"use",55),D.kc(),D.ad(4," LABELS.SHARE "),D.kc()}if(2&e){var i=D.wc();D.Bc("disabled",0===D.yc(1,1,i.appConnectionStatus))}}function Ae(e,t){if(1&e){var n=D.mc();D.lc(0,"simple-dropdown-item",56),D.lc(1,"a",57),D.sc("click",(function(){D.Mc(n);var e=t.$implicit;return D.wc().updateSortOrder(e)})),D.ad(2),D.kc(),D.kc()}if(2&e){var i=t.$implicit;D.Bc("item",i),D.Sb(2),D.bd(i.label)}}function Re(e,t){if(1&e){var n=D.mc();D.lc(0,"simple-dropdown-item",56),D.lc(1,"a",57),D.sc("click",(function(){D.Mc(n);var e=t.$implicit;return D.wc().updatePermissionFilter(e)})),D.ad(2),D.kc(),D.kc()}if(2&e){var i=t.$implicit;D.Bc("item",i),D.Sb(2),D.bd(i.label)}}function Le(e,t){1&e&&(D.vc(),D.uc(),D.gc(0,"loading-bubbles",58))}function Be(e,t){1&e&&(D.lc(0,"div",59),D.lc(1,"p",60),D.ad(2,"FOLDER_PANEL.EMPTY_FOLDER"),D.gc(3,"br"),D.ad(4,"FOLDER_PANEL.EMPTY_FOLDER_SLUG"),D.kc(),D.kc())}var Ne,Ue,Fe=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}};!function(e){e[e.ANY=1]="ANY",e[e.CREATED_BY_ME=2]="CREATED_BY_ME",e[e.SHARED_BY_ME=3]="SHARED_BY_ME",e[e.SHARED_BY_OTHERS=4]="SHARED_BY_OTHERS",e[e.NOT_SHARED=5]="NOT_SHARED",e[e.PRIVATE=6]="PRIVATE",e[e.PUBLIC=7]="PUBLIC"}(Ne||(Ne={})),function(e){e[e.LAST_UPDATED=1]="LAST_UPDATED",e[e.LAST_CREATED=2]="LAST_CREATED"}(Ue||(Ue={}));var Ye=function(){function e(e,t,n,i,a,r,o,c,s,l,u,d,p,g){this.projectLocator=e,this.userLocator=t,this.diagramInfoLocator=n,this.commandService=i,this.planPermManager=a,this.router=r,this.state=o,this.modelSubManager=c,this.logger=s,this.ll=l,this.changeDetectorRef=u,this.translate=d,this.documentManage=p,this.mdlCtrl=g,this.id="folders",this.debounce=200,this.isFolderEmpty=new h.a(!1),this.isUserPaused=new h.a(!1),this.showLoadingIndicator=new h.a(!0),this.selectedTab=new h.a("diagrams"),this.columns=3,this.projectCount=new h.a(0),this.renameMode=new h.a("inactive"),this.projectDiagramNavigation=new f.a,this.searchText=new f.a,this.permissionFilter=new h.a(Ne.ANY),this.sortOrder=new h.a(Ue.LAST_UPDATED),this.isExpandable=!0,this.subs=[],this.projectDiagramNavigation=new f.a}return Object.defineProperty(e.prototype,"filterOptions",{get:function(){return[{label:this.translate.instant("PERMISSION_STATES.NONE"),value:Ne.ANY,select:this.permissionFilter.value===Ne.ANY},{label:this.translate.instant("PERMISSION_STATES.CREATED_BY_ME"),value:Ne.CREATED_BY_ME,select:this.permissionFilter.value===Ne.CREATED_BY_ME},{label:this.translate.instant("PERMISSION_STATES.SHARED_BY_ME"),value:Ne.SHARED_BY_ME,select:this.permissionFilter.value===Ne.SHARED_BY_ME},{label:this.translate.instant("PERMISSION_STATES.SHARED_BY_OTHERS"),value:Ne.SHARED_BY_OTHERS,select:this.permissionFilter.value===Ne.SHARED_BY_OTHERS},{label:this.translate.instant("PERMISSION_STATES.NOT_SHARED"),value:Ne.NOT_SHARED,select:this.permissionFilter.value===Ne.NOT_SHARED},{label:this.translate.instant("PERMISSION_STATES.PRIVATE"),value:Ne.PRIVATE,select:this.permissionFilter.value===Ne.PRIVATE},{label:this.translate.instant("PERMISSION_STATES.PUBLIC"),value:Ne.PUBLIC,select:this.permissionFilter.value===Ne.PUBLIC}]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortOptions",{get:function(){return[{label:this.translate.instant("SORT_ORDERS.LAST_UPDATED"),value:Ue.LAST_UPDATED,select:this.sortOrder.value===Ue.LAST_UPDATED},{label:this.translate.instant("SORT_ORDERS.LAST_CREATED"),value:Ue.LAST_CREATED,select:this.sortOrder.value===Ue.LAST_CREATED}]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){var e=this;return this.state.changes(a.c).pipe(Object(v.a)((function(t){t===a.c.ONLINE&&"folders"===e.state.get("SelectedLeftPanel")&&e.state.get("LeftSidebarState")===_.b.Opened&&e.onOpen()})))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.listenToSelectedProjectChange().subscribe(),this.listenToTabChanges().subscribe(),this.projectDiagramNavigation.pipe(Object(O.a)(1),Object(y.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(O.a)(1),Object(y.a)((function(t){return t.getDiagramModel().pipe(Object(O.a)(1),Object(v.a)((function(t){var n=s.B.HOME;"string"==typeof t.project?n=t.project:t.project&&t.project.id&&(n=t.project.id),e.navigateToProjectDiagrams(n)})))})))}))).subscribe(),this.listenToSidebarStateChanges().subscribe(),this.checkUserPauseStatus().subscribe(),this.listenToDocumentStatusChange().subscribe((function(t){return e.onDocumentStatusChange(t)}))),this.listenToDiagramListChanges()},e.prototype.onOpen=function(){this.state.get("FolderPanelSelectedProject")||this.projectDiagramNavigation.next()},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(C.a)(),Object(v.a)((function(t){t?e.isUserPaused.next(!0):e.isUserPaused.next(!1)})))},e.prototype.createDiagram=function(){var e=this;if(r.Ib.track("left.folder.createDocument.click",{value1Type:"location",value1:""+this.selectedTab.getValue()}),!(this.planPermManager.check([c.m.DIAGRAM_CREATE])||this.planPermManager.check([c.m.DIAGRAM_CREATE_PRIVATE])||this.planPermManager.check([c.m.DIAGRAM_CREATE_PUBLIC])))throw new u.l("Diagram create permission is denied",Object(i.a)(Object(i.a)({},I.a[c.m.DIAGRAM_CREATE_PUBLIC]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(c.m.DIAGRAM_CREATE_PUBLIC)}}));var t=this.state.get("CurrentDiagram");"start"===t?this.router.navigate(["start/new","project",this.state.get("FolderPanelSelectedProject")]).catch((function(t){return e.handlePermError(t)})):this.modelSubManager.stop(t,!0).pipe(Object(O.a)(1),Object(v.a)((function(){e.router.navigate(["start/new","project",e.state.get("FolderPanelSelectedProject")]).catch((function(t){return e.handlePermError(t)}))}))).subscribe()},e.prototype.createFolder=function(){var e=this;if(r.Ib.track("left.folder.createFolder.click"),!this.planPermManager.check([c.m.PROJECT_CREATE]))throw new u.l("Project create permission is denied",I.a[c.m.PROJECT_CREATE]);var t=r.pb.projectId(),n=this.commandService.dispatch(s.t.createProject,{id:t}).pipe(Object(x.a)(),Object(v.a)((function(t){e.navigateToProjectDiagrams(t.eventData.id)}))).subscribe();this.subs.push(n)},e.prototype.setSelectedTab=function(e){this.state.set("FolderPanelSelectedTab",e)},e.prototype.onSearchInputClick=function(){r.Ib.track("left.folder.search",{value1Type:"location",value1:""+this.state.get("FolderPanelSelectedTab")})},e.prototype.navigateToProjectList=function(){this.setSelectedTab("diagrams"),this.setSelectedProject(s.B.HOME),this.projectMdl=null},e.prototype.renameProject=function(e,t){this.renameMode.next("inactive"),this.commandService.dispatch(s.t.renameProject,e,{name:t})},e.prototype.enableRenameMode=function(){r.Ib.track("left.folder.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.hideOptDropdown(),this.renameMode.next("active")},e.prototype.showOptDropdown=function(){this.dropdownItem&&(this.dropdownItem.nativeElement.style.display="block")},e.prototype.hideOptDropdown=function(){this.dropdownItem&&(this.dropdownItem.nativeElement.style.display="none")},e.prototype.updateSortOrder=function(e){r.Ib.track("left.folder.panel.sort.click",{value1Type:"selectedValue",value1:e.value,value2Type:"selectedLabel",value2:e.label}),this.sortOrder.next(e.value)},e.prototype.updatePermissionFilter=function(e){r.Ib.track("left.folder.panel.filter.click",{value1Type:"selectedValue",value1:e.value,value2Type:"selectedLabel",value2:e.label}),this.permissionFilter.next(e.value)},e.prototype.deleteProject=function(){r.Ib.track("left.folder.delete.click"),this.hideOptDropdown();var e=this.state.get("FolderPanelSelectedProject");this.documentManage.deleteProject(e,!0).subscribe()},e.prototype.openShareWindow=function(){var e=this.state.get("FolderPanelSelectedProject");this.state.set("HighlightedProject",e),r.Ib.track("left.folder.share.click"),this.mdlCtrl.show(s.F)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.dispatchGetUserProjects=function(){var e=this;return this.commandService.dispatch(s.t.getUserProjects).pipe(Object(x.a)(),Object(v.a)((function(t){e.projectCount.next(t.resultData[0].projectIds.length)})),Object(y.a)((function(t){var n=t.resultData[0].projectIds;return e.startSubscriptions(n)})))},e.prototype.dispatchGetProjectDiagrams=function(e){return this.diagramInfoLocator.hasProjectDiagrams(e)?(this.commandService.dispatch(s.t.getProjectDiagrams,e,null),Object(g.a)(void 0)):this.commandService.dispatch(s.t.getProjectDiagrams,e,null).pipe(Object(x.a)())},e.prototype.dispatchGetRecentDiagrams=function(){return this.diagramInfoLocator.hasRecentDiagrams()?(this.commandService.dispatch(T.a.getRecentDiagrams),Object(g.a)([])):this.commandService.dispatch(T.a.getRecentDiagrams).pipe(Object(x.a)())},e.prototype.startSubscriptions=function(e){var t=this;if(e&&e.length){var n=e.filter((function(e){return e!==s.B.HOME})).map((function(e){return t.modelSubManager.start(s.A,e).pipe(Object(y.a)((function(e){return e.status})),Object(S.a)((function(e){return e.subStatus!==l.f.created})),Object(v.a)((function(e){e.subStatus===l.f.errored&&t.logger.error("Error occurred when starting project subscription: ",e.error)})),Object(O.a)(1))}));return m.a.apply(void 0,Object(i.j)(n))}throw new Error("No ids were received by the GetUserProjects command.")},e.prototype.handlePermError=function(e){e.data&&setTimeout((function(){throw new u.l("diagram create failed",e.data)}))},e.prototype.listenToTabChanges=function(){var e=this;return this.state.changes("FolderPanelSelectedTab").pipe(Object(S.a)((function(e){return!!e})),Object(v.a)((function(t){e.selectedTab.next(t)})),Object(S.a)((function(e){return"recent"!==e})),Object(y.a)((function(){return e.dispatchGetUserProjects()})))},e.prototype.onDocumentStatusChange=function(e){var t=this.state.get("FolderPanelSelectedTab");if("recent"===t){var n=this.state.get("RecentDiagrams");-1!==(a=n.findIndex((function(t){return t.id===e.id})))&&(n[a].status=e.status,this.state.set("RecentDiagrams",Object(i.j)(n)))}else if(t){var a,r=this.state.get("FolderPanelSelectedProject")||s.B.HOME,o=this.state.get("ProjectDiagrams"),c=o[r];-1!==(a=c.findIndex((function(t){return t.id===e.id})))&&(c[a].status=e.status,o[r]=Object(i.j)(c),this.state.set("ProjectDiagrams",o))}},e.prototype.listenToDocumentStatusChange=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(y.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(y.a)((function(e){return e.getDiagramChanges()})),Object(P.a)((function(e){return{id:e.model.id,status:e.model.status}})),Object(j.a)(),Object(S.a)((function(e){var t=Object(i.h)(e,2),n=t[0],a=t[1];return n.status!==a.status})),Object(P.a)((function(e){var t=Object(i.h)(e,2);t[0];return t[1]})))})))},e.prototype.listenToDiagramListChanges=function(){var e=this;this.diagramList=this.state.changes("FolderPanelSelectedTab").pipe(Object(y.a)((function(t){if(e.isFolderEmpty.next(!1),e.showLoadingIndicator.next(!0),"recent"===t)return e.dispatchGetRecentDiagrams().pipe(Object(y.a)((function(){return e.diagramInfoLocator.getRecentDiagrams()})));var n=e.state.get("FolderPanelSelectedProject")||s.B.HOME;return e.getDiagrams(n)})),Object(y.a)((function(t){return e.searchList(t)})),Object(y.a)((function(t){return e.filterList(t)})),Object(y.a)((function(t){return e.sortList(t)})),Object(v.a)((function(t){var n=!(t.length>0);e.isFolderEmpty.next(n),e.showLoadingIndicator.next(!1)})))},e.prototype.getDiagrams=function(e){var t=this.state.get("CurrentUser");return e===s.B.HOME||e===s.B.SHARED_HOME?this.diagramInfoLocator.getDiagrams(s.B.HOME).pipe(Object(P.a)((function(n){return n.filter((function(n){var i=Object(p.find)(n.collabs,{role:s.f.OWNER});return e===s.B.SHARED_HOME?i&&i.id!==t:i&&i.id===t}))}))):this.diagramInfoLocator.getDiagrams(e)},e.prototype.listenToSidebarStateChanges=function(){var e=this;return this.state.changes("LeftSidebarState").pipe(Object(y.a)((function(t){switch(e.sidebarState=t,e.changeDetectorRef.markForCheck(),t){case _.b.Expanding:return e.fadeContent(!1).start().pipe(Object(v.a)({complete:function(){return e.columns=3}}));case _.b.Shrinking:case _.b.Collapsing:return e.fadeContent(!1).start().pipe(Object(v.a)({complete:function(){e.columns=1,e.permissionFilter.next(Ne.ANY),e.sortOrder.next(Ue.LAST_UPDATED)}}));case _.b.Expanded:case _.b.Opened:return e.fadeContent().start();case _.b.Closed:return e.fadeContent(!1).start();default:return b.a}})))},e.prototype.fadeContent=function(e){void 0===e&&(e=!0);var t={opacity:1},n={opacity:0},i=n,a=t;e||(i=t,a=n);var r=new o.e({from:i,to:a,transitionProperty:"opacity",duration:50,easing:"linear"});return r.element=this.contentContainer.nativeElement,r},e.prototype.listenToSelectedProjectChange=function(){var e=this;return this.state.changes("FolderPanelSelectedProject").pipe(Object(S.a)((function(e){return e&&""!==e})),Object(P.a)((function(t){var n=t===s.B.SHARED_HOME?s.B.HOME:t;return e.projectMdl=e.projectLocator.getProject(n).pipe(Object(P.a)((function(e){return t===s.B.SHARED_HOME?new s.v(s.B.SHARED_HOME,"LABELS.SHARED_HOME"):e}))),n})),Object(v.a)((function(){return e.state.set("FolderPanelSelectedTab","diagrams")})),Object(y.a)((function(t){return e.dispatchGetProjectDiagrams(t)})))},e.prototype.searchList=function(e){return this.searchText.pipe(Object(w.a)(""),Object(k.a)(this.debounce),Object(P.a)((function(t){return t?Object(d.go)(t,e,{key:"name"}).map((function(e){return e.obj})):e})))},e.prototype.filterList=function(e){var t=this;return this.permissionFilter.pipe(Object(P.a)((function(n){var i=t.state.get("CurrentUser");switch(n){case Ne.ANY:return e;case Ne.CREATED_BY_ME:return e.filter((function(e){return!!e.collabs&&e.collabs.filter((function(e){return e.id===i&&e.role===s.f.OWNER})).length>0}));case Ne.SHARED_BY_ME:return e.filter((function(e){return!!e.collabs&&e.collabs.length>1&&e.collabs.filter((function(e){return e.id===i&&e.role===s.f.OWNER})).length>0}));case Ne.SHARED_BY_OTHERS:return e.filter((function(e){return!!e.collabs&&e.collabs.length>1&&e.collabs.filter((function(e){return e.id===i&&(e.role===s.f.EDITOR||e.role===s.f.REVIEWER)})).length>0}));case Ne.NOT_SHARED:return e.filter((function(e){return!!e.collabs&&1===e.collabs.length&&e.collabs.filter((function(e){return e.id===i&&e.role===s.f.OWNER})).length>0}));case Ne.PRIVATE:return e.filter((function(e){return!!e.privacy&&e.privacy.level===u.p.SPECIFIC&&!!e.collabs&&1===e.collabs.length}));case Ne.PUBLIC:return e.filter((function(e){return!!e.privacy&&e.privacy.level===u.p.PUBLIC}));default:return e}})))},e.prototype.sortList=function(e){return this.sortOrder.pipe(Object(P.a)((function(t){switch(t){case Ue.LAST_UPDATED:return Object(p.orderBy)(e,["lastUpdated"],["desc"]);case Ue.LAST_CREATED:return Object(p.orderBy)(e,["createdTime"],["desc"]);default:return e}})))},e.prototype.navigateToProjectDiagrams=function(e){this.setSelectedProject(e),this.setSelectedTab("diagrams")},e.prototype.setSelectedProject=function(e){this.state.set("FolderPanelSelectedProject",e)},e.\u0275fac=function(t){return new(t||e)(D.fc(s.u),D.fc(u.x),D.fc(s.h),D.fc(r.y),D.fc(u.o),D.fc(A.d),D.fc(r.Gb),D.fc(l.d),D.fc(r.ab),D.fc(E.a),D.fc(D.j),D.fc(R.e),D.fc(s.m),D.fc(r.db))},e.\u0275cmp=D.Zb({type:e,selectors:[["folder-panel"]],viewQuery:function(e,t){var n;(1&e&&(D.ed(me,!0),D.ed(be,!0,M.a),D.Tc(ve,!0)),2&e)&&(D.Jc(n=D.tc())&&(t.dropdownItem=n.first),D.Jc(n=D.tc())&&(t.diagramArea=n.first),D.Jc(n=D.tc())&&(t.contentContainer=n.first))},decls:58,vars:52,consts:[[1,"folder-panel","left-sidebar-panel",3,"ngClass"],["contentContainer",""],[1,"folder-panel-project-bar"],[1,"folder-panel-container"],[1,"folder-panel-header","folder-panel-padding","fx-margin-bottom-10"],["class","folder-panel-arrow-header",4,"ngIf"],["icon","search-thin","data-testid","fp-search-input",1,"folder-panel-search",3,"showClearButton","emitForInputChange","placeholder","updateText"],[1,"folder-panel-header-buttons"],[1,"project-collabs"],[3,"limitCount"],["class","nu-btn-med nu-btn-icon-text primary folder-panel-header-button","translate","",3,"disabled","click",4,"ngIf"],["data-testid","fp-sort-by","direction","down",1,"sort-drop-down",3,"settings"],["sortDropDown",""],["ddbutton","",3,"items"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-sort"],["dditem","",1,"simple-dd-item"],["translate","",1,"grey","dt-dropdown-item-label"],["dditem","","class","simple-dd-item",3,"item",4,"ngFor","ngForOf"],["data-testid","fp-filter","direction","down",1,"filter-drop-down",3,"settings"],["filterDropDown",""],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-filter"],[1,"folder-panel-expanded-search-container","folder-panel-padding","fx-margin-bottom-10"],[1,"folder-panel-search-section-wrapper"],[1,"folder-panel-search-container"],["icon","search-thin",1,"folder-panel-search",3,"showClearButton","emitForInputChange","placeholder","updateText"],[1,"folder-panel-btn-container"],["data-testid","fp-create-workspace-button","translate","",1,"nu-btn-med","nu-btn-on-grey","fx-no-margin","dashboard-panel-header-button",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["class","fx-margin-top-10","color","grey",4,"ngIf"],[1,"folder-panel-content"],["class","folder-panel-default-msg fx-margin-top-20",4,"ngIf"],[1,"project-diagrams-scrollbar",3,"psScrollY"],[3,"diagramList","columnCount","projectCount","isUserPaused"],["diagramArea",""],[1,"folder-panel-arrow-header"],[1,"folder-panel-folder-name-heading"],["translate","",1,"nu-text-medium"],["class","folder-panel-folder-name-heading",4,"ngIf"],[4,"ngIf"],["class","option-dd",4,"ngIf"],[3,"value","changedText",4,"ngIf"],[3,"value","focus","selectAll","changedText",4,"ngIf"],[3,"value","changedText"],[3,"value","focus","selectAll","changedText"],[1,"option-dd"],["class","option-dd-button nu-btn-med secondary",3,"mouseenter",4,"projectRole"],[1,"option-dd-item",3,"mouseleave"],["dropdownItem",""],["translate","",3,"click",4,"projectRole"],["translate","",3,"disabled","click",4,"projectRole"],[1,"option-dd-button","nu-btn-med","secondary",3,"mouseenter"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["translate","",3,"click"],["translate","",1,"nu-btn-med","nu-btn-icon-text","primary","folder-panel-header-button",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-share"],["dditem","",1,"simple-dd-item",3,"item"],[1,"dt-dropdown-item",3,"click"],["color","grey",1,"fx-margin-top-10"],[1,"folder-panel-default-msg","fx-margin-top-20"],["translate","",1,"grey","fx-center"]],template:function(e,t){if(1&e){var n=D.mc();D.lc(0,"div",0,1),D.lc(2,"div",2),D.gc(3,"project-bar"),D.kc(),D.lc(4,"div",3),D.lc(5,"div",4),D.Yc(6,Oe,4,0,"div",5),D.xc(7,"async"),D.Yc(8,Me,3,3,"div",5),D.xc(9,"async"),D.lc(10,"text-input",6),D.sc("updateText",(function(e){return t.searchText.next(e)})),D.xc(11,"translate"),D.kc(),D.lc(12,"div",7),D.lc(13,"div",8),D.gc(14,"project-user-strip",9),D.kc(),D.Yc(15,De,5,3,"button",10),D.xc(16,"async"),D.xc(17,"async"),D.lc(18,"abs-dropdown",11,12),D.lc(20,"simple-dropdown-button",13),D.vc(),D.lc(21,"svg",14),D.gc(22,"use",15),D.kc(),D.kc(),D.uc(),D.lc(23,"simple-dropdown-item",16),D.lc(24,"label",17),D.ad(25,"LABELS.SORT_BY"),D.kc(),D.kc(),D.Yc(26,Ae,3,2,"simple-dropdown-item",18),D.kc(),D.lc(27,"abs-dropdown",19,20),D.lc(29,"simple-dropdown-button",13),D.vc(),D.lc(30,"svg",14),D.gc(31,"use",21),D.kc(),D.kc(),D.uc(),D.lc(32,"simple-dropdown-item",16),D.lc(33,"label",17),D.ad(34,"LABELS.FILTER_BY"),D.kc(),D.kc(),D.Yc(35,Re,3,2,"simple-dropdown-item",18),D.kc(),D.kc(),D.kc(),D.lc(36,"div",22),D.lc(37,"div",23),D.lc(38,"div",24),D.lc(39,"text-input",25),D.sc("updateText",(function(e){return t.searchText.next(e)})),D.xc(40,"translate"),D.kc(),D.kc(),D.lc(41,"div",26),D.lc(42,"button",27),D.sc("click",(function(){return t.createDiagram()})),D.xc(43,"async"),D.xc(44,"async"),D.vc(),D.lc(45,"svg",14),D.gc(46,"use",28),D.kc(),D.ad(47," FOLDER_PANEL.CREATE_DOCUMENT "),D.kc(),D.kc(),D.kc(),D.Yc(48,Le,1,0,"loading-bubbles",29),D.xc(49,"async"),D.kc(),D.uc(),D.lc(50,"div",30),D.xc(51,"async"),D.xc(52,"async"),D.Yc(53,Be,5,0,"div",31),D.xc(54,"async"),D.lc(55,"perfect-scrollbar",32),D.sc("psScrollY",(function(e){D.Mc(n);var t=D.Kc(57);return null==t?null:t.onScroll(e)})),D.gc(56,"diagram-list-area",33,34),D.kc(),D.kc(),D.kc(),D.kc()}if(2&e){var i=null;D.Bc("ngClass",t.sidebarState),D.Sb(6),D.Bc("ngIf","recent"===D.yc(7,26,t.selectedTab)),D.Sb(2),D.Bc("ngIf","recent"!==D.yc(9,28,t.selectedTab)),D.Sb(2),D.Cc("placeholder",D.yc(11,30,"PLACEHOLDERS.SEARCH")),D.Bc("showClearButton",!0)("emitForInputChange",!0),D.Sb(4),D.Bc("limitCount",5),D.Sb(1),D.Bc("ngIf","home"!==(null==(i=D.yc(16,32,t.projectMdl))?null:i.id)&&"shared-home"!==(null==(i=D.yc(17,34,t.projectMdl))?null:i.id)),D.Sb(3),D.Bc("settings",D.Ec(50,Fe)),D.Sb(2),D.Bc("items",t.sortOptions),D.Sb(6),D.Bc("ngForOf",t.sortOptions),D.Sb(1),D.Bc("settings",D.Ec(51,Fe)),D.Sb(2),D.Bc("items",t.filterOptions),D.Sb(6),D.Bc("ngForOf",t.filterOptions),D.Sb(4),D.Cc("placeholder",D.yc(40,36,"PLACEHOLDERS.SEARCH")),D.Bc("showClearButton",!0)("emitForInputChange",!0),D.Sb(3),D.Bc("disabled",D.yc(43,38,t.isUserPaused)||0===D.yc(44,40,t.appConnectionStatus)),D.Sb(6),D.Bc("ngIf",D.yc(49,42,t.showLoadingIndicator)),D.Sb(2),D.Xb("folder-panel-content-recent","recent"===D.yc(51,44,t.selectedTab)||"diagrams"===D.yc(52,46,t.selectedTab)),D.Sb(3),D.Bc("ngIf",D.yc(54,48,t.isFolderEmpty)),D.Sb(3),D.Bc("diagramList",t.diagramList)("columnCount",t.columns)("projectCount",t.projectCount)("isUserPaused",t.isUserPaused)}},directives:[L.q,$,L.t,ee.a,ue,de.a,pe.a,he.a,R.a,L.s,J.b,M.a,fe.a,s.y,ge.a],pipes:[L.b,R.d],styles:[".left-sidebar-panel[_ngcontent-%COMP%]{width:215px}.left-sidebar-panel.collapsing[_ngcontent-%COMP%], .left-sidebar-panel.expanded[_ngcontent-%COMP%], .left-sidebar-panel.shrinking[_ngcontent-%COMP%]{width:890px}.left-sidebar-panel.closed[_ngcontent-%COMP%]{transform:translateX(-215px);width:0}.left-sidebar-panel-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.folder-panel[_ngcontent-%COMP%]{display:flex;will-change:opacity;background-color:#f6f6f9;border-right:1px solid #d3d3e7}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%]{margin-top:0;width:-webkit-max-content;width:-moz-max-content;width:max-content;margin-left:10px}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%]{display:none}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]{display:block}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%]{display:block;width:100%}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%]{min-width:138px}.project-collabs[_ngcontent-%COMP%]{margin-right:10px}.option-dd[_ngcontent-%COMP%]{position:relative}.option-dd[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.option-dd-button[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.option-dd-item[_ngcontent-%COMP%]{width:100px;padding:10px;background:#fff;border:1px solid #dcdcdc;border-radius:4px;display:none;position:absolute;z-index:1;right:0}.option-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.option-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.folder-panel-container[_ngcontent-%COMP%]{margin-top:10px;width:100%}.folder-panel-project-bar[_ngcontent-%COMP%]{background-color:#fff;border-right:1px solid #d3d3e7;height:100vh;width:300px}.folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%]{margin-top:10px;width:100%}.folder-panel-expanded-search-container[_ngcontent-%COMP%]{display:none}.folder-panel-search-section-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:5px}.folder-panel-search-container[_ngcontent-%COMP%]{flex-grow:1}.folder-panel-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-left:10px}.folder-panel-content[_ngcontent-%COMP%]{height:calc(100vh - 109px)}.folder-panel-content-recent[_ngcontent-%COMP%]{height:calc(100vh - 113px)}.folder-panel-tabs[_ngcontent-%COMP%]{display:flex;font-size:14px;padding-right:10px}.folder-panel-arrow-header[_ngcontent-%COMP%]{display:flex}.folder-panel-arrow-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer;width:30px}.folder-panel-arrow-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{color:#ffc648}.folder-panel-arrow-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;padding-left:10px;padding-top:2px}.folder-panel-heading[_ngcontent-%COMP%]{width:100px}.folder-panel-heading[_ngcontent-%COMP%]:hover{color:#ffc648}.folder-panel-heading[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]{border-bottom:2px solid #ffc648}.folder-panel-heading[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;padding-bottom:5px}.folder-panel-default-msg[_ngcontent-%COMP%]{line-height:20px;padding-left:15px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;padding-left:5px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .editable-label-container{white-space:normal;height:auto;word-break:break-all}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .editable-label{font-size:16px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .option-dd .option-dd-button, .folder-panel-folder-name-heading[_ngcontent-%COMP%]  .option-dd .option-dd-button .nu-icon{height:25px}.folder-panel-header-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.folder-panel-header-buttons[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]{margin-left:10px}.folder-panel-header-buttons[_ngcontent-%COMP%]  .dt-dropdown-item{display:block}.folder-panel-header-buttons[_ngcontent-%COMP%]  .dt-dropdown-item-label{display:block;margin-bottom:10px}.folder-panel-header-buttons[_ngcontent-%COMP%]  .abs-dropdown-inner-wrapper simple-dropdown-item:not(:last-child) .dt-dropdown-item{margin-bottom:5px}"],changeDetection:0}),e}()},jDMA:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("D57K"),a=n("qMyy"),r=n("5xGT"),o=n("nsO7"),c=n("ZTXN"),s=n("g6G6"),l=n("ROBh"),u=n("6Oco"),d=n("3p4X"),p=n("xVbo"),h=n("TLy2"),f=n("8j5Y"),g=n("J+dc"),m=n("cJ9h"),b=n("YtkY"),v=n("w1VY"),O=n("7zx0"),y=n("flPR"),C=n("h1tj"),x=function(e){function t(t,n){var i=e.call(this)||this;return i.peerId=t,i.user=n,i.onChange=function(){return null},i.prepare(),i}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.animate=function(e,n,i){void 0===i&&(i=t.ANIMATION_DURATION),C.Tween.get(this,{override:!0,onChange:this.onChange}).to({x:e,y:n},i,C.Ease.linear)},t.prototype.prepare=function(){var e=new C.Shape;e.graphics.clear(),e.graphics.beginFill(this.user.displayColor),e.graphics.moveTo(0,0),e.graphics.lineTo(3,12),e.graphics.lineTo(4,4),e.graphics.lineTo(12,3),e.graphics.lineTo(0,0),e.graphics.endFill();var t=new C.Text(this.user.fullName,"12px Arial","#fff");t.x=12,t.y=12;var n=new C.Shape,i=t.getMeasuredWidth()+12,a=t.getMeasuredHeight()+12;n.graphics.beginFill(this.user.displayColor),n.graphics.drawRect(6,6,i,a),n.graphics.endFill(),this.addChild(e),this.addChild(n),this.addChild(t)},t.ANIMATION_DURATION=100,t}(C.Container),S=n("wkcE"),P=n("EM62"),j=function(e){function t(t,n,i,a,r){var o=e.call(this,t)||this;return o.state=t,o.diagToViewport=n,o.realtimeStates=i,o.commandService=a,o.collabLocator=r,o.addSource=new c.a,o.removeSource=new c.a,o.changeSource=new c.a,o.pointers={},o.pointerData={},o}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(o.values)(this.pointers)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("RealtimeConnectionStatus").pipe(Object(p.a)((function(e){return e===O.a.ONLINE})),Object(h.a)((function(){return e.state.changes("CurrentDiagram").pipe(Object(f.a)((function(){e.removeAllIndicators()})),Object(h.a)((function(){return Object(s.a)(e.listenToViewportChanges(),e.listenToRealtimePointerStates(),e.listenToRealtimeSelectedStates(),e.listenToAddedPeers(),e.listenToCleanupInterval(),e.listenToRemovedPeers())})))}))).subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.listenToRealtimeSelectedStates=function(){var e=this;return this.realtimeStates.get(n.KEY_SELECTED).pipe(Object(f.a)((function(t){var n=JSON.parse(t.value),i=e.state.get("Selected").filter((function(e){return n.includes(e)}));i.length&&e.commandService.dispatch(a.a.selectShapes,{shapeIds:i,remove:!0}),e.updateSelectionBlockState(t.userId,n)})))},t.prototype.listenToAddedPeers=function(){var e=this;return this.realtimeStates.addedPeers().pipe(Object(h.a)((function(t){return e.realtimeStates.get(n.KEY_POINTERS).pipe(Object(p.a)((function(e){return e.peerId===t})),Object(g.a)(1))})),Object(f.a)((function(){e.realtimeStates.set("selected",JSON.stringify(e.state.get("Selected")))})))},t.prototype.updateSelectionBlockState=function(e,t){var n=this.state.get("SelectionBlocked"),i=n&&n.length?n.find((function(t){return t.userId===e})):void 0;i?(i.selected=t,this.state.set("SelectionBlocked",n)):(n.push({userId:e,selected:t}),this.state.set("SelectionBlocked",n))},t.prototype.listenToRealtimePointerStates=function(){var e=this;return this.realtimeStates.get(n.KEY_POINTERS).pipe(Object(m.a)((function(t){var n=Boolean(e.pointerData[t.peerId]);return e.pointerData[t.peerId]=JSON.parse(t.value),e.pointerTime[t.peerId]=Date.now(),e.pointers[t.peerId]?Object(l.a)(e.pointers[t.peerId]):n?Object(u.b)():e.collabLocator.getCollab(t.userId).pipe(Object(p.a)((function(e){return!!e})),Object(g.a)(1),Object(b.a)((function(n){return e.createRealtimePointerIndicator(n,t.peerId)})))})),Object(f.a)((function(t){e.updateRealtimePointerIndicator(t)})))},t.prototype.listenToViewportChanges=function(){var e=this;return Object(s.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(f.a)((function(){return e.updateIndicatorPositions()})))},t.prototype.listenToCleanupInterval=function(){var e=this;return Object(d.a)(n.TIME_INACTIVE).pipe(Object(f.a)((function(){return e.removeOldIndicators()})))},t.prototype.listenToRemovedPeers=function(){var e=this;return this.realtimeStates.removedPeers().pipe(Object(f.a)((function(t){return e.removeIndicator(t)})))},t.prototype.removeIndicator=function(e){var t=this.pointers[e];t&&this.updateSelectionBlockState(t.user.id,[]);var n=this.indicators.findIndex((function(e){return e===t}));return this.indicators.splice(n,1),this.removeSource.next(t),delete this.pointers[e],delete this.pointerData[e],delete this.pointerTime[e],Object(u.b)()},t.prototype.removeAllIndicators=function(){var e,t;try{for(var n=Object(i.k)(this.indicators),a=n.next();!a.done;a=n.next()){var r=a.value;this.removeSource.next(r),r.destroy()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.pointers={},this.pointerData={},this.pointerTime={},Object(u.b)()},t.prototype.removeOldIndicators=function(){var e,t,a=Date.now()-n.TIME_INACTIVE;try{for(var r=Object(i.k)(Object.entries(this.pointerTime)),o=r.next();!o.done;o=r.next()){var c=Object(i.h)(o.value,2),s=c[0];c[1]<a&&this.removeIndicator(s)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return Object(u.b)()},t.prototype.updateIndicatorPositions=function(){var e,t;try{for(var n=Object(i.k)(Object.keys(this.pointers)),a=n.next();!a.done;a=n.next()){var r=a.value,o=this.pointers[r];this.updateRealtimePointerIndicator(o)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.createRealtimePointerIndicator=function(e,t){var n=this,i=new x(t,e);return this.pointers[t]=i,this.addSource.next(i),i.onChange=function(){return n.changeSource.next(i)},this.updateRealtimePointerIndicator(i,!1),i},t.prototype.updateRealtimePointerIndicator=function(e,t){void 0===t&&(t=!0);var n=this.pointerData[e.peerId],i=this.diagToViewport.x(n[0]),a=this.diagToViewport.y(n[1]);t?e.animate(i,a):(e.x=i,e.y=a)},t.KEY_POINTERS="pointer",t.KEY_SELECTED="selected",t.TIME_INACTIVE=6e4,t.\u0275fac=function(e){return new(e||t)(P.pc(r.Gb),P.pc(v.a),P.pc(O.b),P.pc(r.y),P.pc(S.a))},t.\u0275prov=P.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(y.a)(),Object(i.g)("design:paramtypes",[r.Gb,v.a,O.b,r.y,S.a])],t)}(y.b)},tHMF:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("D57K"),a=n("W9bu"),r=n("X0jn"),o=n("wx9+"),c=n("h1tj"),s=function(e){function t(n){var i=e.call(this)||this;i.translate=n,i.animationDuration=30,i.textPadding=5,i.onChange=function(){return null},i.text=new c.Text(i.translate.instant("TOOLTIPS.CLICK_TO_OPEN_LINK"),"12px Arial","#7E7E7E"),i.textRect=new c.Shape;var a=i.text.getMeasuredWidth()+2*i.textPadding,r=i.text.getMeasuredHeight()+2*i.textPadding;return i.clickableRect=new c.Shape,i.clickableRect.name=t.clickableRectName,i.clickableRect.alpha=0,i.textRect.graphics.clear().setStrokeStyle(1).beginStroke("#ECECEC").beginFill("#fff").drawRect(0,0,a,r).endFill(),i.textRect.setBounds(0,0,a,r),i.text.setBounds(0,0,i.text.getMeasuredWidth(),i.text.getMeasuredHeight()),i.circle=new c.Shape,i.addChild(i.circle),i.addChild(i.textRect),i.addChild(i.text),i.addChild(i.clickableRect),i.circle.graphics.clear(),i.circle.graphics.beginFill(t.ICON_COLOR),i.circle.graphics.beginStroke("#FFFFFF"),i.circle.graphics.setStrokeStyle(2),i.circle.graphics.drawCircle(0,0,5),i.circle.graphics.endStroke(),i.circle.graphics.endFill(),i.circle.shadow=new c.Shadow("rgba(0, 0, 0, 0.25)",0,2,3),i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"clickable",{set:function(e){this.clickableRect.alpha=e?1:0},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){},t.prototype.update=function(e,t){this.bounds=e,this.link=t,this.circle.x=e.right,this.circle.y=e.bottom,this.text.x=e.centerX-this.text.getBounds().width/2,this.text.y=e.bottom+this.textPadding+15,this.clickableRect.graphics.clear().beginFill("rgba(0,0,0,0.01)").drawRect(0,0,e.width,e.height).endFill(),this.clickableRect.x=e.x,this.clickableRect.y=e.y,this.textRect.x=e.centerX-this.textRect.getBounds().width/2,this.textRect.y=e.bottom+15,this.setVisibilty([this.text,this.textRect],!1)},t.prototype.toggleInfo=function(e){var t=this.text.isVisible()&&this.textRect.isVisible();if(this.bounds){var n=this.bounds.contains({x:e.x,y:e.y,width:0,height:0});!t&&n&&this.setVisibilty([this.text,this.textRect],!0),t&&!n&&this.setVisibilty([this.text,this.textRect],!1)}},t.prototype.setVisibilty=function(e,t){var n=this;e.forEach((function(e){return c.Tween.get(e,{override:!0,onChange:n.onChange}).to({alpha:t?1:0,visible:t},n.animationDuration)}))},t.ICON_COLOR="#5B7AEA",t.clickableRectName="clickableRect",t}(c.Container),l=n("5xGT"),u=n("ZTXN"),d=n("g6G6"),p=n("KTx3"),h=n("TLy2"),f=n("8j5Y"),g=n("YtkY"),m=n("J+dc"),b=n("xVbo"),v=n("QoSw"),O=n("flPR"),y=n("nsO7"),C=n("sXdR"),x=n("s2Ay"),S=n("EM62"),P=function(e){function t(t,n,i,a,r){var o=e.call(this,a)||this;return o.linkService=t,o.viewport=n,o.ll=i,o.state=a,o.translate=r,o._indicators={},o.addSource=new u.a,o.removeSource=new u.a,o.changeSource=new u.a,o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(y.values)(this._indicators)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this.indicators.forEach((function(t){return t.visible=e}))},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(h.a)((function(){return e.removeIndicators(),e.init()})));this.subs.push(t.subscribe(),this.handleVisibility().subscribe(),this.handleKeyDown().subscribe(),this.handleKeyUp().subscribe(),this.handleClick().subscribe(),this.pointerMove().subscribe((function(t){e.indicators.forEach((function(e){return e.toggleInfo(t)}))})))},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.init=function(){var e=this;return Object(d.a)(this.ll.forCurrentObserver(!0).pipe(Object(h.a)((function(e){return e.getDiagramModel()})),Object(h.a)((function(t){return e.manageIndicators(t)}))),this.viewport.getShapeModels().pipe(Object(h.a)((function(t){return e.updateIndicators(t)}))))},t.prototype.handleKeyDown=function(){var e=this;return this.getKeyEvent("keydown").pipe(Object(f.a)((function(){return e.indicators.forEach((function(t){t.clickable=!0,e.changeSource.next(t)}))})))},t.prototype.handleKeyUp=function(){var e=this;return this.getKeyEvent("keyup").pipe(Object(f.a)((function(){return e.indicators.forEach((function(t){t.clickable=!1,e.changeSource.next(t)}))})))},t.prototype.handleClick=function(){var e=this;return Object(p.a)(this.indicatorLayer,"click").pipe(Object(f.a)((function(t){if(t.target&&t.target.name===s.clickableRectName){var n=t.target.parent;n.link&&e.linkService.navigate(n.link)}})))},t.prototype.handleVisibility=function(){var e=this;return this.state.changes("Selected").pipe(Object(h.a)((function(t){return e.ll.forCurrentObserver(!0).pipe(Object(h.a)((function(e){return e.getDiagramModel()})),Object(g.a)((function(e){return{ids:t,diagram:e}})))})),Object(f.a)((function(t){var n=t.ids,i=t.diagram;if(0===n.length)e.indicators.forEach((function(t){t.circle.visible=!0,e.changeSource.next(t)}));else if(1===n.length){(a=e._indicators[n[0]])&&(a.circle.visible=!1,e.changeSource.next(a))}else if(n.length>1&&i.isShapeInGroup(n)){var a,r=i.getGroupHierarchy(n[0])[0];(a=e._indicators[r])&&(a.circle.visible=!1,e.changeSource.next(a))}})))},t.prototype.pointerMove=function(e){return void 0===e&&(e=200),Object(p.a)(this.indicatorLayer.canvas,"mousemove").pipe(Object(C.lodashThrottle)(e,{leading:!0,trailing:!0}),Object(g.a)((function(e){return{x:e.x,y:e.y}})))},t.prototype.manageIndicators=function(e){var t=this,n=[];for(var a in e.groups){e.groups[a].link&&n.push(a)}return this.viewport.getShapeModels().pipe(Object(m.a)(1),Object(f.a)((function(e){var a=Object(y.values)(e).filter((function(e){return e.link})).map((function(e){return e.id})),r=Object(i.j)(n,a);t.manageIndicatorsRemove(r),t.manageIndicatorsAdd(r)})))},t.prototype.manageIndicatorsRemove=function(e){var t=this;Object.keys(this._indicators).forEach((function(n){e.includes(n)||t.removeIndicator(n)}))},t.prototype.removeIndicators=function(){var e=this;Object.keys(this._indicators).forEach((function(t){return e.removeIndicator(t)})),this._indicators={}},t.prototype.manageIndicatorsAdd=function(e){var t=this;e.forEach((function(e){t._indicators[e]||(t._indicators[e]=new s(t.translate),t._indicators[e].onChange=function(){return t.changeSource.next(t._indicators[e])},t.addSource.next(t._indicators[e]))}))},t.prototype.updateIndicators=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(h.a)((function(e){return e.getDiagramOnce()})),Object(f.a)((function(n){Object.keys(t._indicators).forEach((function(i){var a=e[i];if(a){var r=t._indicators[i],o=a.bounds;r.update(o,a.link),t.changeSource.next(r)}else if(n.groups[i]){r=t._indicators[i];var c=n.groups[i],s=c.shapes.map((function(t){return e[t]})),l=s[0].bounds;s.forEach((function(e,t){t>0&&l.absorb(e.bounds)})),r.update(l,c.link),t.changeSource.next(r)}}))})))},t.prototype.getKeyEvent=function(e){return Object(p.a)(window,e).pipe(Object(b.a)((function(e){return e.keyCode===r.f.Command||e.keyCode===r.f.Control})))},t.prototype.removeIndicator=function(e){var t=this._indicators[e];this.removeSource.next(t),delete this._indicators[e]},t.\u0275fac=function(e){return new(e||t)(S.pc(a.a),S.pc(o.a),S.pc(v.a),S.pc(l.Gb),S.pc(x.e))},t.\u0275prov=S.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(O.a)(),Object(i.g)("design:paramtypes",[a.a,o.a,v.a,l.Gb,x.e])],t)}(O.b)},weoZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));var i=n("Jzy8"),a=n("8j5Y"),r=n("J+dc"),o=n("TaSY"),c=n("xVbo"),s=n("TLy2"),l=n("C05f"),u=n("ROBh"),d=n("HM3f"),p=n("6Oco"),h=n("5xGT"),f=n("4y1S"),g=n("xnGY"),m=n("S0Xf"),b=n("NNJu"),v=n("C5+t"),O=n("foQ2"),y=n("8EYK"),C=n("QoSw"),x=n("Q4Fx"),S=n("c7W3"),P=n("EM62"),j=n("sEIs"),w=n("s2Ay"),k=n("2kYt"),E=n("crdX"),I=n("K0+f"),T=n("ZTXN"),_=n("mWib"),M=n("RTAa"),D=n("JupZ"),A=n("jHi0");function R(e,t){1&e&&(P.lc(0,"div",9),P.vc(),P.lc(1,"svg",10),P.gc(2,"use",11),P.kc(),P.uc(),P.lc(3,"span",12),P.lc(4,"p",13),P.ad(5,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.HEADING"),P.kc(),P.lc(6,"p",14),P.ad(7,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.DESCRIPTION"),P.kc(),P.kc(),P.kc())}var L=function(e){return{value1Type:"diagramId",value1:e}},B=function(e){return{event:"left.dashboard.recentDocument.click",data:e}},N=function(){function e(e,t,n,i,a){this.state=e,this.router=t,this.elementRef=n,this.modelSubManager=i,this.diagramNavigation=a,this.enteredToViewport=new l.a(!1)}return Object.defineProperty(e.prototype,"isCurrent",{get:function(){return this.state.get("CurrentDiagram")===this.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollCheck",{set:function(e){!this.enteredToViewport.value&&D.is(this.elementRef.nativeElement)&&this.enteredToViewport.next(!0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.state.get("CurrentDiagram");"start"!==n?n===e?this.state.set("SelectedLeftPanel","shapes"):this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(r.a)(1),Object(a.a)((function(){t.diagramNavigation.navigateToDiagram(e,"edit")}))).subscribe():this.diagramNavigation.navigateToDiagram(e,"edit")},e.\u0275fac=function(t){return new(t||e)(P.fc(h.Gb),P.fc(j.d),P.fc(P.r),P.fc(g.d),P.fc(M.a))},e.\u0275cmp=P.Zb({type:e,selectors:[["diagram-info-item"]],inputs:{name:"name",folderName:"folderName",lastUpdatedMoment:"lastUpdatedMoment",isUserPaused:"isUserPaused",id:"id",scrollCheck:"scrollCheck"},features:[P.Rb([h.xb])],decls:13,vars:8,consts:[[1,"diagram-info-item",3,"trackAction","click"],[1,"diagram-info-icon"],[1,"nu-icon","purple"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-document"],[1,"diagram-info-text-info","fx-ellipsis"],[1,"diagram-info-doc-name","fx-margin-bottom-5"],[1,"fx-ellipsis"],["translate",""],["tooltip","","placement","bottom",4,"ngIf"],["tooltip","","placement","bottom"],[1,"nu-icon","nu-icon-small","grey"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-lock"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"]],template:function(e,t){1&e&&(P.lc(0,"div",0),P.sc("click",(function(){return t.navToSelectedDiagram(t.id)})),P.lc(1,"div",1),P.vc(),P.lc(2,"svg",2),P.gc(3,"use",3),P.kc(),P.kc(),P.uc(),P.lc(4,"div",4),P.lc(5,"div",5),P.lc(6,"h2",6),P.ad(7),P.kc(),P.kc(),P.lc(8,"span",7),P.ad(9,"LABELS.LAST_OPENED"),P.kc(),P.lc(10,"span"),P.ad(11),P.kc(),P.kc(),P.Yc(12,R,8,0,"div",8),P.kc()),2&e&&(P.Bc("trackAction",P.Fc(6,B,P.Fc(4,L,t.id))),P.Sb(7),P.bd(t.name),P.Sb(4),P.cd(" "," "+t.lastUpdatedMoment,""),P.Sb(1),P.Bc("ngIf",t.isUserPaused))},directives:[I.a,w.a,k.t,A.a],styles:[".diagram-info-item[_ngcontent-%COMP%]{padding:15px 20px;display:flex;align-items:center;border:1px solid #d3d3e7;border-radius:4px;background-color:#fff;box-shadow:0 2px 2px #c3c3de;width:396.5px}.diagram-info-item[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #bcbcda;background-color:#f4fcfa}.diagram-info-text-info[_ngcontent-%COMP%]{flex:1}.diagram-info-text-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:14px;flex:1;margin:0}.diagram-info-text-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#7e7e7e}.diagram-info-doc-name[_ngcontent-%COMP%]{display:flex;align-items:center}.diagram-info-icon[_ngcontent-%COMP%]{margin-right:20px}.diagram-info-call[_ngcontent-%COMP%]{margin-left:20px}.diagram-info-user-count[_ngcontent-%COMP%]{display:flex}.diagram-info-count-bubble[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:100%;text-align:center;line-height:25px;color:#fff;position:relative}.diagram-info-notifications[_ngcontent-%COMP%]{margin-right:-5px;margin-left:20px;background-color:#f36c67;z-index:1}.diagram-info-user-count-lbl[_ngcontent-%COMP%]{background-color:#f6f6fa;margin-right:-10px}.diagram-info-user-count[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block}"],changeDetection:0}),e}();function U(e,t){if(1&e&&(P.gc(0,"diagram-info-item",2),P.xc(1,"async")),2&e){var n=t.$implicit,i=P.wc();P.Bc("id",null==n?null:n.id)("name",null==n?null:n.name)("folderName",null==n?null:n.project)("lastUpdatedMoment",i.getLastOpenedMoment(n))("scrollCheck",P.yc(1,6,i.scroll))("isUserPaused",i.isUserPaused)}}var F=function(e){return{"diagram-info-list-area-three-columns":e}},Y=function(){function e(){this._columnCount=1,this._scroll=new T.a,this.scroll=this._scroll.pipe(Object(_.a)(e.scrollDebounce))}return Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnCount},set:function(e){this._columnCount=e},enumerable:!1,configurable:!0}),e.prototype.getDiagramTrackId=function(e,t){return t.id},e.prototype.getLastOpenedMoment=function(e){return new i.i(e.id,e.name,e).lastUpdatedMoment()},e.prototype.onScroll=function(e){this._scroll.next(e)},e.scrollDebounce=400,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=P.Zb({type:e,selectors:[["diagram-info-list-area"]],inputs:{diagramList:"diagramList",isUserPaused:"isUserPaused",columnCount:"columnCount"},decls:3,vars:7,consts:[[1,"diagram-info-list-area-container","diagram-info-list-area-grid",3,"ngClass"],[3,"id","name","folderName","lastUpdatedMoment","scrollCheck","isUserPaused",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","name","folderName","lastUpdatedMoment","scrollCheck","isUserPaused"]],template:function(e,t){1&e&&(P.lc(0,"div",0),P.Yc(1,U,2,8,"diagram-info-item",1),P.xc(2,"async"),P.kc()),2&e&&(P.Bc("ngClass",P.Fc(5,F,3===t.columnCount)),P.Sb(1),P.Bc("ngForOf",P.yc(2,3,t.diagramList))("ngForTrackBy",t.getDiagramTrackId))},directives:[k.q,k.s,N],pipes:[k.b],styles:[".diagram-info-list-area-container[_ngcontent-%COMP%]   diagram-info-item[_ngcontent-%COMP%]{float:left;box-sizing:border-box;margin-bottom:15px}.diagram-info-list-area-container[_ngcontent-%COMP%]   diagram-info-item[_ngcontent-%COMP%]:nth-child(odd){margin-right:10px}.diagram-info-list-area-container[_ngcontent-%COMP%]   diagram-info-item[_ngcontent-%COMP%]:nth-child(2n){margin-left:10px}"],changeDetection:0}),e}(),G=n("xEGh"),H=n("62De"),V=["diagramArea"],W=["contentContainer"];function X(e,t){if(1&e&&(P.lc(0,"h1"),P.ad(1),P.xc(2,"async"),P.kc()),2&e){var n=t.ngIf,i=P.wc();P.Sb(1),P.cd("",P.yc(2,1,i.getWelcomeHeader(n.firstName)),"!")}}function K(e,t){1&e&&P.gc(0,"loading-bubbles",21)}var z=function(){return{event:"left.dashboard.moreDocuments.click"}};function q(e,t){if(1&e){var n=P.mc();P.lc(0,"div",22),P.lc(1,"a",23),P.sc("click",(function(){return P.Mc(n),P.wc(2).showDocuments(!0)})),P.ad(2,"DASHBOARD_PANEL.MORE_RECENT"),P.kc(),P.kc()}2&e&&(P.Sb(1),P.Bc("trackAction",P.Ec(1,z)))}function J(e,t){if(1&e&&(P.vc(),P.uc(),P.lc(0,"div",14),P.lc(1,"h2",15),P.ad(2,"DASHBOARD_PANEL.CONTINUE_YOUR_WORK"),P.kc(),P.Yc(3,K,1,0,"loading-bubbles",16),P.xc(4,"async"),P.lc(5,"div",17),P.gc(6,"diagram-info-list-area",18,19),P.xc(8,"async"),P.kc(),P.Yc(9,q,3,2,"div",20),P.xc(10,"async"),P.kc()),2&e){var n=P.wc();P.Sb(3),P.Bc("ngIf",P.yc(4,5,n.showLoadingIndicator)),P.Sb(3),P.Bc("diagramList",n.diagramList)("columnCount",n.columns)("isUserPaused",P.yc(8,7,n.isUserPaused)),P.Sb(3),P.Bc("ngIf",P.yc(10,9,n.recentCount)>8)}}var Z=function(e,t,n){return{id:e,name:t,type:n,location:"left.dashboard.featuredTemplate"}};function Q(e,t){if(1&e){var n=P.mc();P.lc(0,"template-thumbnail",26),P.sc("onButtonClick",(function(e){P.Mc(n);var t=P.wc().$implicit;return P.wc().navigateToTemplate(t.id,e)})),P.xc(1,"async"),P.kc()}if(2&e){var i=P.wc().$implicit,a=P.wc();P.Bc("name",i.name)("thumbImg",i.thumbUrl)("isUserPaused",P.yc(1,4,a.isUserPaused))("trackingInfo",P.Hc(6,Z,i.id,i.name,i.type))}}function $(e,t){if(1&e&&(P.lc(0,"div",24),P.Yc(1,Q,2,10,"template-thumbnail",25),P.kc()),2&e){var n=t.$implicit;P.Sb(1),P.Bc("ngIf",n)}}var ee=function(){return{event:"left.dashboard.createDiagram.click"}},te=function(){return{event:"left.dashboard.viewAllDiagram.click"}},ne=function(){function e(e,t,n,i,a,r,o,c,s,u,d,p,h,f){this.diagramInfoLocator=e,this.commandService=t,this.planPermManager=n,this.random=i,this.router=a,this.state=r,this.modelSubManager=o,this.logger=c,this.ll=s,this.changeDetectorRef=u,this.translate=d,this.env=p,this.userLocator=h,this.templateLoader=f,this.id="dashboard",this.expandSidebar=!0,this.debounce=200,this.showLoadingIndicator=new l.a(!0),this.isUserPaused=new l.a(!1),this.columns=1,this.permissionFilter=new l.a(O.b.ANY),this.sortOrder=new l.a(O.c.LAST_UPDATED),this.isExpandable=!0,this.subs=[],this.recentCount=new l.a(1)}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){var e=this;return this.state.changes(v.c).pipe(Object(a.a)((function(t){t===v.c.ONLINE&&e.state.get("LeftSidebarState")===x.b.Opened&&e.onOpen()})))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.listenToSidebarStateChanges().subscribe(),this.checkUserPauseStatus().subscribe()),this.fetchRecentDiagram(),this.userMdl=this.userLocator.getUserData()},e.prototype.onOpen=function(){},e.prototype.getWelcomeHeader=function(e){return this.translate.get("DASHBOARD_PANEL.WELCOME",{name:e})},e.prototype.getfeaturedTemplates=function(){return this.templateLoader.featuredTemplates},e.prototype.navigateToTemplate=function(e,t){"use"===t&&this.createDiagram(e)},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(r.a)(1),Object(a.a)((function(t){return e.isUserPaused.next(t)})))},e.prototype.showDocuments=function(e){this.state.set("SelectedLeftPanel","folders"),e?this.state.set("FolderPanelSelectedTab","recent"):this.state.set("FolderPanelSelectedTab","diagrams")},e.prototype.createDiagram=function(e){var t=this;void 0===e&&(e="");var n={};e&&e.length>0&&(n={templateId:e}),this.router.navigate(["start/new/project/home"],{queryParams:n}).catch((function(e){return t.handlePermError(e)}))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.dispatchGetRecentDiagrams=function(){return this.diagramInfoLocator.hasRecentDiagrams()?(this.commandService.dispatch(S.a.getRecentDiagrams),Object(u.a)([])):this.commandService.dispatch(S.a.getRecentDiagrams).pipe(Object(o.a)())},e.prototype.handlePermError=function(e){e.data&&setTimeout((function(){throw new f.l("diagram create failed",e.data)}))},e.prototype.fetchRecentDiagram=function(){var e=this;this.diagramList=Object(d.b)(this.state.changes("LeftSidebarState").pipe(Object(c.a)((function(e){return"expanded"===e}))),this.state.changes("SelectedLeftPanel").pipe(Object(c.a)((function(e){return"dashboard"===e})))).pipe(Object(a.a)((function(){e.showLoadingIndicator.next(!0)})),Object(s.a)((function(){return e.dispatchGetRecentDiagrams().pipe(Object(s.a)((function(){return e.diagramInfoLocator.getRecentDiagrams().pipe(Object(a.a)((function(t){e.recentCount.next(t.length),e.showLoadingIndicator.next(!1)})),Object(s.a)((function(e){return Object(u.a)(e.slice(0,8))})))})))})))},e.prototype.listenToSidebarStateChanges=function(){var e=this;return this.state.changes("LeftSidebarState").pipe(Object(s.a)((function(t){switch(e.sidebarState=t,e.changeDetectorRef.markForCheck(),t){case x.b.Expanding:return e.fadeContent(!1).start().pipe(Object(a.a)({complete:function(){return e.columns=2}}));case x.b.Shrinking:case x.b.Collapsing:return e.fadeContent(!1).start().pipe(Object(a.a)({complete:function(){e.columns=1,e.permissionFilter.next(O.b.ANY),e.sortOrder.next(O.c.LAST_UPDATED)}}));case x.b.Expanded:case x.b.Opened:return e.fadeContent().start();default:return p.a}})))},e.prototype.fadeContent=function(e){void 0===e&&(e=!0);var t={opacity:1},n={opacity:0},i=n,a=t;e||(i=t,a=n);var r=new b.e({from:i,to:a,transitionProperty:"opacity",duration:50,easing:"linear"});return r.element=this.contentContainer.nativeElement,r},e.\u0275fac=function(t){return new(t||e)(P.fc(i.h),P.fc(h.y),P.fc(f.o),P.fc(h.pb),P.fc(j.d),P.fc(h.Gb),P.fc(g.d),P.fc(h.ab),P.fc(C.a),P.fc(P.j),P.fc(w.e),P.fc(h.C),P.fc(f.x),P.fc(y.a))},e.\u0275cmp=P.Zb({type:e,selectors:[["dashboard-panel"]],viewQuery:function(e,t){var n;(1&e&&(P.ed(V,!0,m.a),P.Tc(W,!0)),2&e)&&(P.Jc(n=P.tc())&&(t.diagramArea=n.first),P.Jc(n=P.tc())&&(t.contentContainer=n.first))},decls:23,vars:17,consts:[[1,"dashboard-panel","left-sidebar-panel",3,"ngClass"],["contentContainer",""],[1,"dashboard-panel-inner"],[4,"ngIf"],[1,"dashboard-buttons"],["data-testid","create-workspace-button","translate","",1,"nu-btn-med","nu-btn-on-grey","fx-no-margin","dashboard-panel-header-button",3,"trackAction","disabled","click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["translate","",1,"nu-btn-med","nu-btn-on-grey","fx-no-margin","dashboard-panel-header-button",3,"trackAction","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-documents"],["class","dashboard-panel-content",4,"ngIf"],["translate","",1,"fx-margin-top-30"],[1,"template-thumbnail-items-container"],["class","template-thumbnail",4,"ngFor","ngForOf"],[1,"dashboard-panel-content"],["translate",""],["class","fx-margin-top-20","color","grey",4,"ngIf"],[1,"dashboard-recent-docs-container"],[3,"diagramList","columnCount","isUserPaused"],["diagramArea",""],["class","fx-text-right",4,"ngIf"],["color","grey",1,"fx-margin-top-20"],[1,"fx-text-right"],["translate","",1,"dashboard-panel-more-recent","primary",3,"trackAction","click"],[1,"template-thumbnail"],[3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick",4,"ngIf"],[3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick"]],template:function(e,t){1&e&&(P.lc(0,"div",0,1),P.lc(2,"perfect-scrollbar"),P.lc(3,"div",2),P.Yc(4,X,3,3,"h1",3),P.xc(5,"async"),P.lc(6,"div",4),P.lc(7,"button",5),P.sc("click",(function(){return t.createDiagram()})),P.xc(8,"async"),P.xc(9,"async"),P.vc(),P.lc(10,"svg",6),P.gc(11,"use",7),P.kc(),P.ad(12," FOLDER_PANEL.CREATE_DOCUMENT "),P.kc(),P.uc(),P.lc(13,"button",8),P.sc("click",(function(){return t.showDocuments(!1)})),P.vc(),P.lc(14,"svg",6),P.gc(15,"use",9),P.kc(),P.ad(16," DASHBOARD_PANEL.VIEW_ALL_DIAGRAM "),P.kc(),P.kc(),P.Yc(17,J,11,11,"div",10),P.xc(18,"async"),P.uc(),P.lc(19,"h2",11),P.ad(20,"DASHBOARD_PANEL.FEATURED_TEMPLATES"),P.kc(),P.lc(21,"div",12),P.Yc(22,$,2,1,"div",13),P.kc(),P.kc(),P.kc(),P.kc()),2&e&&(P.Bc("ngClass",t.sidebarState),P.Sb(4),P.Bc("ngIf",P.yc(5,7,t.userMdl)),P.Sb(3),P.Bc("trackAction",P.Ec(15,ee))("disabled",P.yc(8,9,t.isUserPaused)||0===P.yc(9,11,t.appConnectionStatus)),P.Sb(6),P.Bc("trackAction",P.Ec(16,te)),P.Sb(4),P.Bc("ngIf",P.yc(18,13,t.recentCount)>0),P.Sb(5),P.Bc("ngForOf",t.getfeaturedTemplates()))},directives:[k.q,E.b,k.t,w.a,I.a,k.s,Y,G.a,H.a],pipes:[k.b],styles:[".left-sidebar-panel[_ngcontent-%COMP%]{width:215px}.left-sidebar-panel.collapsing[_ngcontent-%COMP%], .left-sidebar-panel.expanded[_ngcontent-%COMP%], .left-sidebar-panel.shrinking[_ngcontent-%COMP%]{width:890px}.left-sidebar-panel.closed[_ngcontent-%COMP%]{transform:translateX(-215px);width:0}.left-sidebar-panel-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.left-sidebar-panel[_ngcontent-%COMP%]{width:100%;background-color:#f6f6f9;padding-left:25px}.dashboard-panel-inner[_ngcontent-%COMP%]{padding-right:25px}.dashboard-panel[_ngcontent-%COMP%]{height:100vh;border-right:1px solid #d3d3e7;background-image:url(/assets/images/dashboard/dashboard-bg.svg);background-position:100% 0;background-repeat:no-repeat}.dashboard-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dashboard-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Questrial,sans-serif}.dashboard-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:25px;margin-bottom:25px;margin-top:35px}.dashboard-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:15px}.dashboard-section[_ngcontent-%COMP%]{margin-bottom:70px}.dashboard-buttons[_ngcontent-%COMP%]{margin-bottom:25px;display:flex}.dashboard-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}.dashboard-buttons[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:-8px}.dashboard-recent-docs-container[_ngcontent-%COMP%]{display:flex}.template-thumbnail-items-container[_ngcontent-%COMP%]{margin-bottom:20px;display:inline-grid;grid-template-columns:auto auto auto;grid-row-gap:10px;grid-column-gap:10px;grid-template-columns:repeat(auto-fit,minmax(195px,195px));width:100%}.dashboard-panel-more-recent[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0}),e}()},"wp/b":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("D57K"),a=n("h1tj"),r=function(e){function t(){var t=e.call(this)||this;return t.onChange=function(){return null},t.shape=new a.Shape,t.addChild(t.shape),t}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.initDraw=function(e){this.shape.alpha=1,this.shape.visible=!0,this.shape.graphics.clear().setStrokeStyle(t.thickness).beginStroke(t.color).drawRect(0,0,e.width,e.height).endStroke(),this.updatePosition(e),this.animate()},t.prototype.updatePosition=function(e){this.shape.x=e.x,this.shape.y=e.y},t.prototype.animate=function(){a.Tween.get(this.shape,{override:!0,onChange:this.onChange}).to({alpha:0,visible:!1},t.animationDuration)},t.animationDuration=2e3,t.color="#F6AA00",t.thickness=2,t}(a.Container),o=n("wx9+"),c=n("5xGT"),s=n("ZTXN"),l=n("8lHc"),u=n("6Oco"),d=n("Ohay"),p=n("TLy2"),h=n("xVbo"),f=n("kuMc"),g=n("jIqt"),m=n("0Woy"),b=n("8j5Y"),v=n("YtkY"),O=n("QoSw"),y=n("flPR"),C=n("nsO7"),x=n("EM62"),S=function(e){function t(t,n,i){var a=e.call(this,i)||this;return a.viewport=t,a.ll=n,a.state=i,a.addSource=new s.a,a.removeSource=new s.a,a.changeSource=new s.a,a}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return[this._indicator]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this.indicators.forEach((function(t){return t.visible=e}))},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(d.a)(C.isEqual),Object(p.a)((function(t){return e.removeIndicator(),e.init()})));this.subs.push(t.subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.init=function(){var e=this;return this.state.changes("ShapelinkTarget").pipe(Object(h.a)((function(e){return e.shapeId||e.groupId})),Object(p.a)((function(t){return e.addIndicator(),e.getBounds(t).pipe(Object(f.a)(Object(l.a)(r.animationDuration)),Object(g.a)(null),Object(m.a)(),Object(b.a)((function(t){var n=Object(i.h)(t,2),a=n[0],r=n[1];null===a?(e._indicator.initDraw(r),e.changeSource.next(e._indicator)):(e._indicator.updatePosition(r),e.changeSource.next(e._indicator))})))})))},t.prototype.getBounds=function(e){var t=this;return e.shapeId?this.viewport.getShapeModel(e.shapeId).pipe(Object(v.a)((function(e){return e.bounds}))):e.groupId?this.ll.forCurrentObserver(!0).pipe(Object(p.a)((function(e){return e.getDiagramOnce()})),Object(p.a)((function(n){if(n.groups[e.groupId]){var i=n.getShapesInGroup(e.groupId);return t.viewport.getShapeModels(i).pipe(Object(v.a)((function(e){var t=Object(C.values)(e),n=t[0].bounds;return t.forEach((function(e){n.absorb(e.bounds)})),n})))}return Object(u.b)()}))):void 0},t.prototype.addIndicator=function(){var e=this;this._indicator||(this._indicator=new r,this.addSource.next(this._indicator),this._indicator.onChange=function(){return e.changeSource.next(e._indicator)})},t.prototype.removeIndicator=function(){this._indicator&&(this.removeSource.next(this._indicator),this._indicator=null)},t.\u0275fac=function(e){return new(e||t)(x.pc(o.a),x.pc(O.a),x.pc(c.Gb))},t.\u0275prov=x.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(y.a)(),Object(i.g)("design:paramtypes",[o.a,O.a,c.Gb])],t)}(y.b)},ys29:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("C05f"),a=n("EM62"),r=n("8Tlt"),o=n("2kYt"),c=function(){function e(){this.isPreview=!1,this.loading=new i.a(!0)}return e.prototype.imageLoaded=function(){var e=this;setTimeout((function(){e.loading.next(!1)}),0)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Zb({type:e,selectors:[["thumbnail-image"]],inputs:{url:"url",isPreview:"isPreview"},decls:7,vars:7,consts:[[1,"thumb-img-container","fx-center-all"],[1,"thumb-img-loader-container","white"],[1,"thumb-img-image-container","fx-center-all"],["draggable","false",3,"src","load"],["thumbnail",""]],template:function(e,t){1&e&&(a.lc(0,"div",0),a.xc(1,"async"),a.lc(2,"div",1),a.gc(3,"shape-thumbnail-loader"),a.kc(),a.lc(4,"div",2),a.lc(5,"img",3,4),a.sc("load",(function(){return t.imageLoaded()})),a.kc(),a.kc(),a.kc()),2&e&&(a.Xb("loading",a.yc(1,5,t.loading)),a.Sb(4),a.Xb("preview",t.isPreview),a.Sb(1),a.Bc("src",t.url,a.Pc))},directives:[r.a],pipes:[o.b],styles:[".thumb-img-container[_ngcontent-%COMP%]{position:relative}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-loader-container[_ngcontent-%COMP%]{display:block}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumb-img-container[_ngcontent-%COMP%]   .thumb-img-image-container.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px;max-height:80px}.thumb-img-container[_ngcontent-%COMP%]   .thumb-img-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:35px;max-height:35px}.thumb-img-image-container[_ngcontent-%COMP%], .thumb-img-loader-container[_ngcontent-%COMP%]{width:100%;height:35px}.thumb-img-loader-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:none}"],changeDetection:0}),e}()}}]);
//# sourceMappingURL=1.da149a59137a63a56782.js.map